import{a as N,r as i,j as e}from"./index-Bhr8nl4h.js";import{T as c}from"./TopNavigation-qEDxUxvl.js";import{F as _}from"./Footer-C4nop-zi.js";import{C as k}from"./ChatBox-Bicireb3.js";import{s as m}from"./supabase-BeTKJXoN.js";import{m as x}from"./proxy-h76D_HW5.js";function E(){const{id:l}=N(),[n,p]=i.useState(!1),[t,h]=i.useState(null),[g,o]=i.useState(!0),[d,u]=i.useState(0);i.useEffect(()=>{const s=()=>{p(window.scrollY>50)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]),i.useEffect(()=>{l&&f()},[l]);const f=async()=>{try{o(!0);const{data:s,error:a}=await m.from("listings").select("*").eq("id",l).single();if(a)throw a;if(s){const v="https://snovwbffwvmkgjulrtsm.supabase.co";let r=[];s.images&&Array.isArray(s.images)&&s.images.length>0?r=s.images.map(w=>`${v}/storage/v1/object/public/product-images/${w}`):s.image_url?r=[s.image_url]:r=["https://readdy.ai/api/search-image?query=product%20placeholder%20simple%20clean%20background&width=800&height=600&seq=placeholder&orientation=landscape"],console.log("ðŸ“¸ Resim URL'leri:",r),h({id:s.id,title:s.title,description:s.description||"",price:s.price,category:s.category,condition:s.condition,location:s.location,images:r,is_premium:s.is_premium||!1,views:s.view_count||0,created_at:s.created_at,user_name:s.user_name||"SatÄ±cÄ±",user_phone:s.user_phone||""}),await m.rpc("increment_listing_views",{listing_id:l})}}catch(s){console.error("Error fetching listing:",s)}finally{o(!1)}},j=s=>new Date(s).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"}),b=()=>{if(t?.user_phone){const s=encodeURIComponent(`Merhaba, "${t.title}" ilanÄ±nÄ±z hakkÄ±nda bilgi almak istiyorum.`);window.open(`https://wa.me/${t.user_phone.replace(/\D/g,"")}?text=${s}`,"_blank")}},y=s=>{u(s)};return g?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-cyan-50",children:[e.jsx(c,{isScrolled:n}),e.jsx("div",{className:"pt-24 pb-16 flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block w-12 h-12 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Ä°lan yÃ¼kleniyor..."})]})})]}):t?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-cyan-50",children:[e.jsx(c,{isScrolled:n}),e.jsx("div",{className:"pt-24 pb-16",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[e.jsxs(x.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"space-y-4",children:[e.jsxs("div",{className:"relative h-96 lg:h-[500px] rounded-2xl overflow-hidden bg-white shadow-lg",children:[e.jsx("img",{src:t.images[d]||"https://readdy.ai/api/search-image?query=product%20placeholder%20simple%20clean%20background&width=800&height=600&seq=placeholder&orientation=landscape",alt:t.title,className:"w-full h-full object-cover"}),t.is_premium&&e.jsxs("div",{className:"absolute top-4 right-4 px-4 py-2 bg-gradient-to-r from-amber-400 to-orange-500 text-white text-sm font-bold rounded-full flex items-center space-x-2",children:[e.jsx("i",{className:"ri-vip-crown-fill"}),e.jsx("span",{children:"Premium Ä°lan"})]})]}),t.images.length>1&&e.jsx("div",{className:"grid grid-cols-4 gap-3",children:t.images.map((s,a)=>e.jsx("button",{onClick:()=>y(a),className:`relative h-24 rounded-lg overflow-hidden cursor-pointer transition-all ${d===a?"ring-4 ring-primary-500 scale-105":"hover:scale-105 opacity-70 hover:opacity-100"}`,children:e.jsx("img",{src:s,alt:`${t.title} - ${a+1}`,className:"w-full h-full object-cover"})},a))})]}),e.jsxs(x.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsx("h1",{className:"text-3xl font-bold text-gray-900 flex-1",children:t.title})}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"text-4xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:[t.price.toLocaleString("tr-TR")," â‚º"]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsx("i",{className:"ri-eye-line"}),e.jsxs("span",{children:[t.views," gÃ¶rÃ¼ntÃ¼lenme"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mb-6",children:[e.jsx("span",{className:"px-4 py-2 bg-purple-100 text-purple-700 text-sm font-medium rounded-full",children:t.category}),e.jsx("span",{className:"px-4 py-2 bg-green-100 text-green-700 text-sm font-medium rounded-full",children:t.condition}),e.jsxs("span",{className:"px-4 py-2 bg-blue-100 text-blue-700 text-sm font-medium rounded-full flex items-center space-x-1",children:[e.jsx("i",{className:"ri-map-pin-line"}),e.jsx("span",{children:t.location})]})]}),e.jsxs("div",{className:"pt-6 border-t border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Ä°lan Tarihi"}),e.jsx("p",{className:"text-gray-900 font-medium",children:j(t.created_at)})]})]}),t.description&&e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"AÃ§Ä±klama"}),e.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:t.description})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"SatÄ±cÄ± Bilgileri"}),e.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-primary rounded-full flex items-center justify-center text-white text-2xl font-bold",children:t.user_name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:t.user_name}),e.jsx("p",{className:"text-sm text-gray-500",children:"SatÄ±cÄ±"})]})]}),t.user_phone&&e.jsxs("button",{onClick:b,className:"w-full py-4 bg-gradient-to-r from-green-500 to-green-600 text-white font-semibold rounded-xl hover:shadow-lg transition-all flex items-center justify-center space-x-2 cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-whatsapp-line text-2xl"}),e.jsx("span",{children:"WhatsApp ile Ä°letiÅŸime GeÃ§"})]})]})]})]})})}),e.jsx(_,{}),e.jsx(k,{})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-cyan-50",children:[e.jsx(c,{isScrolled:n}),e.jsx("div",{className:"pt-24 pb-16 flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"ri-error-warning-line text-6xl text-gray-300 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Ä°lan BulunamadÄ±"}),e.jsx("p",{className:"text-gray-500",children:"AradÄ±ÄŸÄ±nÄ±z ilan mevcut deÄŸil veya kaldÄ±rÄ±lmÄ±ÅŸ olabilir."})]})})]})}export{E as default};
//# sourceMappingURL=page-BYN9e6Nm.js.map
