import{j as e,u as D,r as m}from"./index-Bhr8nl4h.js";import{m as b}from"./proxy-h76D_HW5.js";import{A as R,C as P}from"./ChatBox-Bicireb3.js";import{T as E}from"./TopNavigation-qEDxUxvl.js";import{F as T}from"./Footer-C4nop-zi.js";import{s as w}from"./supabase-BeTKJXoN.js";const C=[{id:"Elektronik",name:"Elektronik",icon:"ri-smartphone-line"},{id:"Otomotiv",name:"Otomotiv",icon:"ri-car-line"},{id:"Emlak",name:"Emlak",icon:"ri-home-4-line"},{id:"Mobilya & Dekorasyon",name:"Mobilya & Dekorasyon",icon:"ri-sofa-line"},{id:"Giyim & Aksesuar",name:"Giyim & Aksesuar",icon:"ri-shirt-line"},{id:"Gıda & İçecek",name:"Gıda & İçecek",icon:"ri-restaurant-line"},{id:"Kozmetik & Kişisel Bakım",name:"Kozmetik & Kişisel Bakım",icon:"ri-heart-pulse-line"},{id:"Kozmetik & Bakım",name:"Kozmetik & Bakım",icon:"ri-heart-pulse-line"},{id:"Kitap, Dergi & Müzik",name:"Kitap, Dergi & Müzik",icon:"ri-book-line"},{id:"Spor & Outdoor",name:"Spor & Outdoor",icon:"ri-basketball-line"},{id:"Anne, Bebek & Oyuncak",name:"Anne, Bebek & Oyuncak",icon:"ri-bear-smile-line"},{id:"Hayvan & Pet Shop",name:"Hayvan & Pet Shop",icon:"ri-footprint-line"},{id:"Yapı Market & Bahçe",name:"Yapı Market & Bahçe",icon:"ri-hammer-line"},{id:"Hobi & Oyun",name:"Hobi & Oyun",icon:"ri-gamepad-line"},{id:"Sanat & Zanaat",name:"Sanat & Zanaat",icon:"ri-palette-line"},{id:"İş & Sanayi",name:"İş & Sanayi",icon:"ri-building-line"},{id:"Eğitim & Kurs",name:"Eğitim & Kurs",icon:"ri-graduation-cap-line"},{id:"Etkinlik & Bilet",name:"Etkinlik & Bilet",icon:"ri-ticket-line"},{id:"Hizmetler",name:"Hizmetler",icon:"ri-service-line"},{id:"Diğer",name:"Diğer",icon:"ri-more-line"}],L=[{id:"sifir",name:"Sıfır"},{id:"az-kullanilmis",name:"Az Kullanılmış"},{id:"kullanilmis",name:"Kullanılmış"}],M=[{id:"all",name:"Tüm Zamanlar"},{id:"today",name:"Bugün"},{id:"week",name:"Son 7 Gün"},{id:"month",name:"Son 30 Gün"}];function B({filters:a,onFilterChange:t}){const o=i=>{const n=a.categories.includes(i)?a.categories.filter(x=>x!==i):[...a.categories,i];t({categories:n})},c=i=>{const n=a.condition.includes(i)?a.condition.filter(x=>x!==i):[...a.condition,i];t({condition:n})};return e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 sticky top-28",children:[e.jsx("h3",{className:"text-lg font-bold mb-6",children:"Filtreler"}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Kategoriler"}),e.jsx("div",{className:"space-y-2",children:C.map(i=>e.jsxs(b.button,{onClick:()=>o(i.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all cursor-pointer ${a.categories.includes(i.id)?"bg-gradient-primary text-white shadow-md":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx("i",{className:`${i.icon} text-lg`}),e.jsx("span",{className:"text-sm font-medium",children:i.name})]},i.id))})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Fiyat Aralığı"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"number",value:a.priceRange[0],onChange:i=>t({priceRange:[Number(i.target.value),a.priceRange[1]]}),placeholder:"Min",className:"w-full px-4 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"}),e.jsx("span",{className:"text-gray-400",children:"-"}),e.jsx("input",{type:"number",value:a.priceRange[1],onChange:i=>t({priceRange:[a.priceRange[0],Number(i.target.value)]}),placeholder:"Max",className:"w-full px-4 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[a.priceRange[0].toLocaleString("tr-TR")," ₺ - ",a.priceRange[1].toLocaleString("tr-TR")," ₺"]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Konum"}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"ri-map-pin-line absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:a.location,onChange:i=>t({location:i.target.value}),placeholder:"Şehir veya ilçe ara...",className:"w-full pl-11 pr-4 py-3 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Ürün Durumu"}),e.jsx("div",{className:"space-y-2",children:L.map(i=>e.jsxs("label",{className:"flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.condition.includes(i.id),onChange:()=>c(i.id),className:"w-5 h-5 rounded border-gray-300 text-primary-600 focus:ring-primary-500 cursor-pointer"}),e.jsx("span",{className:"text-sm text-gray-700",children:i.name})]},i.id))})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-4",children:"İlan Tarihi"}),e.jsx("select",{value:a.dateRange,onChange:i=>t({dateRange:i.target.value}),className:"w-full px-4 py-3 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 cursor-pointer",children:M.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center space-x-3 px-4 py-3 rounded-lg bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 cursor-pointer hover:shadow-md transition-all",children:[e.jsx("input",{type:"checkbox",checked:a.isPremium,onChange:i=>t({isPremium:i.target.checked}),className:"w-5 h-5 rounded border-amber-300 text-amber-600 focus:ring-amber-500 cursor-pointer"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"ri-vip-crown-fill text-amber-600"}),e.jsx("span",{className:"text-sm font-semibold text-amber-900",children:"Sadece Premium İlanlar"})]})]})})]})}function A({listing:a,viewMode:t,index:o}){const c=D(),i=x=>{const j=new Date,p=new Date(x),u=j.getTime()-p.getTime(),y=Math.floor(u/6e4),f=Math.floor(u/36e5),r=Math.floor(u/864e5);return y<60?`${y} dakika önce`:f<24?`${f} saat önce`:r<7?`${r} gün önce`:p.toLocaleDateString("tr-TR")},n=()=>{c(`/listing/${a.id}`)};return t==="list"?e.jsx(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o*.05},onClick:n,className:"bg-white rounded-2xl shadow-md hover:shadow-xl transition-all overflow-hidden cursor-pointer group",children:e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"relative w-64 h-48 flex-shrink-0",children:[e.jsx("img",{src:a.image,alt:a.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),a.isPremium&&e.jsxs("div",{className:"absolute top-3 left-3 px-3 py-1 bg-gradient-to-r from-amber-400 to-orange-500 text-white text-xs font-bold rounded-full flex items-center space-x-1",children:[e.jsx("i",{className:"ri-vip-crown-fill"}),e.jsx("span",{children:"Premium"})]})]}),e.jsxs("div",{className:"flex-1 p-6 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 group-hover:text-primary-600 transition-colors",children:a.title}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:a.description})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-2xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:[a.price.toLocaleString("tr-TR")," ₺"]})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-xs font-medium rounded-full",children:a.category}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:a.condition})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("i",{className:"ri-map-pin-line"}),e.jsx("span",{children:a.location})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("i",{className:"ri-eye-line"}),e.jsx("span",{children:a.views})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("i",{className:"ri-time-line"}),e.jsx("span",{children:i(a.createdAt)})]})]})]})]})}):e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o*.05},onClick:n,className:"bg-white rounded-2xl shadow-md hover:shadow-xl transition-all overflow-hidden cursor-pointer group","data-product-shop":!0,children:[e.jsxs("div",{className:"relative h-56 overflow-hidden",children:[e.jsx("img",{src:a.image,alt:a.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),a.isPremium&&e.jsxs("div",{className:"absolute top-3 right-3 px-3 py-1 bg-gradient-to-r from-amber-400 to-orange-500 text-white text-xs font-bold rounded-full flex items-center space-x-1",children:[e.jsx("i",{className:"ri-vip-crown-fill"}),e.jsx("span",{children:"Premium"})]}),e.jsx("div",{className:"absolute bottom-3 left-3 px-3 py-1 bg-white/90 backdrop-blur-sm rounded-full text-xs font-medium text-gray-700",children:a.category})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2 line-clamp-2 group-hover:text-primary-600 transition-colors",children:a.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:a.description}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"text-2xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:[a.price.toLocaleString("tr-TR")," ₺"]}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:a.condition})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("i",{className:"ri-map-pin-line"}),e.jsx("span",{children:a.location})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("i",{className:"ri-eye-line"}),e.jsx("span",{children:a.views})]}),e.jsx("span",{children:i(a.createdAt)})]})]})]})]})}async function F(a){try{let t=w.from("listings").select("*").eq("status","active");if(a.categories&&a.categories.length>0&&(t=t.in("category",a.categories)),a.priceRange&&a.priceRange.length===2&&(t=t.gte("price",a.priceRange[0]).lte("price",a.priceRange[1])),a.location&&(t=t.ilike("location",`%${a.location}%`)),a.condition&&a.condition.length>0&&(t=t.in("condition",a.condition)),a.isPremium&&(t=t.eq("is_premium",!0)),a.dateRange&&a.dateRange!=="all"){const i=new Date;let n;switch(a.dateRange){case"today":n=new Date(i.setHours(0,0,0,0));break;case"week":n=new Date(i.setDate(i.getDate()-7));break;case"month":n=new Date(i.setMonth(i.getMonth()-1));break;default:n=new Date(0)}t=t.gte("created_at",n.toISOString())}t=t.order("created_at",{ascending:!1});const{data:o,error:c}=await t;if(c)throw console.error("Supabase query error:",c),c;return o||[]}catch(t){throw console.error("Error fetching listings:",t),t}}const v=a=>{if(!a)return null;if(a.startsWith("http"))return a;const{data:t}=w.storage.from("product-images").getPublicUrl(a);return t.publicUrl||null};function _(){const[a,t]=m.useState(!1),[o,c]=m.useState("grid"),[i,n]=m.useState("newest"),[x,j]=m.useState(!1),[p,u]=m.useState([]),[y,f]=m.useState(!1),[r,N]=m.useState({categories:[],priceRange:[0,1e6],location:"",condition:[],isPremium:!1,dateRange:"all"});m.useEffect(()=>{const d=()=>{t(window.scrollY>50)};return window.addEventListener("scroll",d),()=>window.removeEventListener("scroll",d)},[]),m.useEffect(()=>{(async()=>{f(!0);try{let g=[...(await F(r)).map(s=>({id:s.id,title:s.title,description:s.description,price:s.price,category:s.category,location:s.location,condition:s.condition,image:v(s.images?.[0])||v(s.image_url)||"https://via.placeholder.com/400x300",images:s.images?.map(l=>v(l)).filter(l=>!!l),isPremium:s.is_premium||!1,views:s.views,createdAt:s.created_at,seller:{name:"Kullanıcı",rating:4.5,verified:!1}}))];switch(i){case"newest":g.sort((s,l)=>new Date(l.createdAt).getTime()-new Date(s.createdAt).getTime());break;case"oldest":g.sort((s,l)=>new Date(s.createdAt).getTime()-new Date(l.createdAt).getTime());break;case"price-low":g.sort((s,l)=>s.price-l.price);break;case"price-high":g.sort((s,l)=>l.price-s.price);break;case"popular":g.sort((s,l)=>l.views-s.views);break}u(g)}catch(h){console.error("Failed to fetch from Supabase:",h),u([])}finally{f(!1)}})()},[r,i]);const k=d=>{N(h=>({...h,...d}))},S=()=>{N({categories:[],priceRange:[0,1e6],location:"",condition:[],isPremium:!1,dateRange:"all"})};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-cyan-50",children:[e.jsx(E,{isScrolled:a}),e.jsx("div",{className:"pt-24 pb-16",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl lg:text-5xl font-display font-bold mb-4",children:e.jsx("span",{className:"bg-gradient-primary bg-clip-text text-transparent",children:"Tüm İlanlar"})}),e.jsxs("p",{className:"text-lg text-gray-600",children:[p.length," ilan bulundu"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>j(!x),className:"flex items-center space-x-2 px-5 py-2.5 bg-white rounded-full shadow-md hover:shadow-lg transition-all whitespace-nowrap cursor-pointer",children:[e.jsx("i",{className:"ri-filter-3-line text-lg"}),e.jsx("span",{className:"text-sm font-medium",children:"Filtreler"}),(r.categories.length>0||r.condition.length>0||r.isPremium)&&e.jsx("span",{className:"w-5 h-5 bg-gradient-primary text-white text-xs rounded-full flex items-center justify-center",children:r.categories.length+r.condition.length+(r.isPremium?1:0)})]}),(r.categories.length>0||r.condition.length>0||r.isPremium||r.location)&&e.jsx("button",{onClick:S,className:"text-sm text-gray-600 hover:text-red-600 transition-colors whitespace-nowrap cursor-pointer",children:"Filtreleri Temizle"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:i,onChange:d=>n(d.target.value),className:"px-4 py-2.5 bg-white rounded-full shadow-md text-sm font-medium cursor-pointer focus:outline-none focus:ring-2 focus:ring-primary-500","aria-label":"İlanları sırala",children:[e.jsx("option",{value:"newest",children:"En Yeni"}),e.jsx("option",{value:"oldest",children:"En Eski"}),e.jsx("option",{value:"price-low",children:"Fiyat: Düşükten Yükseğe"}),e.jsx("option",{value:"price-high",children:"Fiyat: Yüksekten Düşüğe"}),e.jsx("option",{value:"popular",children:"En Popüler"})]}),e.jsxs("div",{className:"flex items-center bg-white rounded-full shadow-md p-1",children:[e.jsx("button",{onClick:()=>c("grid"),className:`w-10 h-10 rounded-full flex items-center justify-center transition-all cursor-pointer ${o==="grid"?"bg-gradient-primary text-white":"text-gray-600 hover:text-gray-900"}`,"aria-label":"Izgara görünümü",children:e.jsx("i",{className:"ri-grid-line text-lg"})}),e.jsx("button",{onClick:()=>c("list"),className:`w-10 h-10 rounded-full flex items-center justify-center transition-all cursor-pointer ${o==="list"?"bg-gradient-primary text-white":"text-gray-600 hover:text-gray-900"}`,"aria-label":"Liste görünümü",children:e.jsx("i",{className:"ri-list-check text-lg"})})]})]})]}),e.jsxs("div",{className:"flex gap-8",children:[e.jsx(R,{children:x&&e.jsx(b.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"w-80 flex-shrink-0",children:e.jsx(B,{filters:r,onFilterChange:k})})}),e.jsx("div",{className:"flex-1",children:p.length===0?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("i",{className:"ri-inbox-line text-6xl text-gray-300 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"İlan Bulunamadı"}),e.jsx("p",{className:"text-gray-500",children:"Filtrelerinizi değiştirmeyi deneyin"})]}):e.jsx("div",{className:o==="grid"?"grid md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:p.map((d,h)=>e.jsx(A,{listing:d,viewMode:o,index:h},d.id))})})]})]})}),e.jsx(T,{}),e.jsx(P,{})]})}export{_ as default};
//# sourceMappingURL=page-DJC1tMQV.js.map
