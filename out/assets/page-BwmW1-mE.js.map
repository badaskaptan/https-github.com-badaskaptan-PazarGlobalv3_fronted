{"version":3,"file":"page-BwmW1-mE.js","sources":["../../src/pages/create-listing/page.tsx"],"sourcesContent":["import { useState, useRef, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport TopNavigation from '../../components/feature/TopNavigation';\r\nimport Footer from '../home/components/Footer';\r\nimport ChatBox from '../../components/feature/ChatBox';\r\nimport { supabase } from '../../lib/supabase';\r\nimport { useAuthStore } from '../../stores/authStore';\r\n\r\ntype FormData = {\r\n  title: string;\r\n  description: string;\r\n  price: string;\r\n  category: string;\r\n  condition: string;\r\n  location: string;\r\n};\r\n\r\nconst categories = [\r\n  'Otomotiv',\r\n  'Elektronik',\r\n  'Ev & YaÅŸam',\r\n  'Moda & Aksesuar',\r\n  'Spor & Outdoor',\r\n  'Kitap & Hobi',\r\n  'Mobilya',\r\n  'DiÄŸer'\r\n];\r\n\r\nconst conditions = [\r\n  'SÄ±fÄ±r',\r\n  'Az KullanÄ±lmÄ±ÅŸ',\r\n  'Ä°yi Durumda',\r\n  'Orta Durumda'\r\n];\r\n\r\n// AI Suggestions based on category\r\nconst titleSuggestions: Record<string, string[]> = {\r\n  'Otomotiv': [\r\n    'Temiz BakÄ±mlÄ± [Marka] [Model]',\r\n    'SÄ±fÄ±r AyarÄ±nda [AraÃ§ Tipi]',\r\n    'Az Km\\'de HasarsÄ±z [Marka]'\r\n  ],\r\n  'Elektronik': [\r\n    'SÄ±fÄ±r Kutusunda [ÃœrÃ¼n]',\r\n    'Garantili [Marka] [Model]',\r\n    'HiÃ§ KullanÄ±lmamÄ±ÅŸ [ÃœrÃ¼n]'\r\n  ],\r\n  'Ev & YaÅŸam': [\r\n    'Tertemiz [ÃœrÃ¼n]',\r\n    'Az KullanÄ±lmÄ±ÅŸ [ÃœrÃ¼n]',\r\n    'SÄ±fÄ±r Gibi [ÃœrÃ¼n]'\r\n  ],\r\n  'Moda & Aksesuar': [\r\n    'Orijinal [Marka] [ÃœrÃ¼n]',\r\n    'HiÃ§ Giyilmedi [ÃœrÃ¼n]',\r\n    'Etiketli [Marka] [ÃœrÃ¼n]'\r\n  ],\r\n  'Spor & Outdoor': [\r\n    'Az KullanÄ±lmÄ±ÅŸ [ÃœrÃ¼n]',\r\n    'Profesyonel [ÃœrÃ¼n]',\r\n    'SÄ±fÄ±r AyarÄ±nda [ÃœrÃ¼n]'\r\n  ],\r\n  'Kitap & Hobi': [\r\n    'Koleksiyon [ÃœrÃ¼n]',\r\n    'Nadir Bulunan [ÃœrÃ¼n]',\r\n    'Yeni [ÃœrÃ¼n]'\r\n  ],\r\n  'Mobilya': [\r\n    'SÄ±fÄ±r Gibi [ÃœrÃ¼n]',\r\n    'LÃ¼ks [ÃœrÃ¼n]',\r\n    'Temiz [ÃœrÃ¼n]'\r\n  ],\r\n  'DiÄŸer': [\r\n    'Kaliteli [ÃœrÃ¼n]',\r\n    'Uygun Fiyat [ÃœrÃ¼n]',\r\n    'Acil SatÄ±lÄ±k [ÃœrÃ¼n]'\r\n  ]\r\n};\r\n\r\n// AI Description templates\r\nconst descriptionTemplates: Record<string, string> = {\r\n  'Otomotiv': 'Bu araÃ§ son derece bakÄ±mlÄ±dÄ±r. TÃ¼m periyodik bakÄ±mlarÄ± zamanÄ±nda yapÄ±lmÄ±ÅŸtÄ±r. Hasar kaydÄ± yoktur. Orijinal boyasÄ±dÄ±r. Ä°Ã§ ve dÄ±ÅŸ temizliÄŸi mÃ¼kemmeldir.',\r\n  'Elektronik': 'ÃœrÃ¼n hiÃ§ kullanÄ±lmamÄ±ÅŸtÄ±r. Orijinal kutusunda ve tÃ¼m aksesuarlarÄ±yla birlikte. Garanti sÃ¼resi devam etmektedir. FaturasÄ± mevcuttur.',\r\n  'Ev & YaÅŸam': 'ÃœrÃ¼n Ã§ok az kullanÄ±lmÄ±ÅŸtÄ±r. Temiz ve bakÄ±mlÄ±dÄ±r. Herhangi bir hasarÄ± veya kusuru yoktur. Orijinal ambalajÄ±nda.',\r\n  'Moda & Aksesuar': 'Orijinal Ã¼rÃ¼ndÃ¼r. HiÃ§ kullanÄ±lmamÄ±ÅŸtÄ±r. Etiketlidir. TÃ¼m aksesuarlarÄ±yla birlikte. FaturasÄ± mevcuttur.',\r\n  'Spor & Outdoor': 'Profesyonel kalitede Ã¼rÃ¼ndÃ¼r. Az kullanÄ±lmÄ±ÅŸtÄ±r. TÃ¼m fonksiyonlarÄ± Ã§alÄ±ÅŸÄ±r durumdadÄ±r. BakÄ±mlÄ±dÄ±r.',\r\n  'Kitap & Hobi': 'Koleksiyon Ã¼rÃ¼nÃ¼dÃ¼r. Ã‡ok iyi durumdadÄ±r. Nadir bulunur. Orijinaldir.',\r\n  'Mobilya': 'Mobilya Ã§ok az kullanÄ±lmÄ±ÅŸtÄ±r. Temiz ve bakÄ±mlÄ±dÄ±r. Herhangi bir hasarÄ± yoktur. SÃ¶kÃ¼lÃ¼p takÄ±labilir.',\r\n  'DiÄŸer': 'ÃœrÃ¼n Ã§ok iyi durumdadÄ±r. Temiz ve bakÄ±mlÄ±dÄ±r. TÃ¼m fonksiyonlarÄ± Ã§alÄ±ÅŸÄ±r durumdadÄ±r.'\r\n};\r\n\r\n// Resim sÄ±kÄ±ÅŸtÄ±rma fonksiyonu\r\nconst compressImage = async (file: File, maxSizeMB: number = 0.9): Promise<File> => {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = (event) => {\r\n      const img = new Image();\r\n      img.src = event.target?.result as string;\r\n      img.onload = () => {\r\n        const canvas = document.createElement('canvas');\r\n        let width = img.width;\r\n        let height = img.height;\r\n\r\n        const maxDimension = 1920;\r\n        if (width > height && width > maxDimension) {\r\n          height = (height * maxDimension) / width;\r\n          width = maxDimension;\r\n        } else if (height > maxDimension) {\r\n          width = (width * maxDimension) / height;\r\n          height = maxDimension;\r\n        }\r\n\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n\r\n        const ctx = canvas.getContext('2d');\r\n        ctx?.drawImage(img, 0, 0, width, height);\r\n\r\n        let quality = 0.9;\r\n        const maxSizeBytes = maxSizeMB * 1024 * 1024;\r\n\r\n        const tryCompress = (q: number) => {\r\n          canvas.toBlob(\r\n            (blob) => {\r\n              if (!blob) {\r\n                reject(new Error('Resim sÄ±kÄ±ÅŸtÄ±rÄ±lamadÄ±'));\r\n                return;\r\n              }\r\n\r\n              if (blob.size > maxSizeBytes && q > 0.1) {\r\n                tryCompress(q - 0.1);\r\n              } else {\r\n                const compressedFile = new File([blob], file.name, {\r\n                  type: 'image/jpeg',\r\n                  lastModified: Date.now(),\r\n                });\r\n                resolve(compressedFile);\r\n              }\r\n            },\r\n            'image/jpeg',\r\n            q\r\n          );\r\n        };\r\n\r\n        tryCompress(quality);\r\n      };\r\n      img.onerror = () => reject(new Error('Resim yÃ¼klenemedi'));\r\n    };\r\n    reader.onerror = () => reject(new Error('Dosya okunamadÄ±'));\r\n  });\r\n};\r\n\r\nexport default function CreateListingPage() {\r\n  const navigate = useNavigate();\r\n  const [isScrolled, setIsScrolled] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [uploadedImages, setUploadedImages] = useState<File[]>([]);\r\n  const [previewUrls, setPreviewUrls] = useState<string[]>([]);\r\n  const [compressing, setCompressing] = useState(false);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  const [userId, setUserId] = useState<string | null>(null);\r\n  const [authChecked, setAuthChecked] = useState(false);\r\n  const { user, customUser } = useAuthStore();\r\n  \r\n  const [formData, setFormData] = useState<FormData>({\r\n    title: '',\r\n    description: '',\r\n    price: '',\r\n    category: '',\r\n    condition: '',\r\n    location: ''\r\n  });\r\n\r\n  const [errors, setErrors] = useState<Partial<FormData>>({});\r\n\r\n  // AI Assistant States\r\n  const [showAIAssistant, setShowAIAssistant] = useState(false);\r\n  const [aiLoading, setAiLoading] = useState(false);\r\n  const [showTitleSuggestions, setShowTitleSuggestions] = useState(false);\r\n  const [showDescriptionSuggestions, setShowDescriptionSuggestions] = useState(false);\r\n\r\n  // KullanÄ±cÄ± giriÅŸi kontrolÃ¼ - Hem Supabase hem WhatsApp auth\r\n  useEffect(() => {\r\n    const checkAuth = async () => {\r\n      if (user) {\r\n        setUserId(user.id);\r\n        setAuthChecked(true);\r\n        return;\r\n      }\r\n\r\n      if (customUser) {\r\n        setUserId(customUser.id);\r\n        setAuthChecked(true);\r\n        return;\r\n      }\r\n\r\n      const sessionToken = localStorage.getItem('session_token');\r\n      const storedUserId = localStorage.getItem('user_id');\r\n\r\n      if (sessionToken && storedUserId) {\r\n        try {\r\n          const { data, error } = await supabase.functions.invoke('auth-verify', {\r\n            body: { session_token: sessionToken }\r\n          });\r\n\r\n          if (!error && data.success) {\r\n            setUserId(storedUserId);\r\n            setAuthChecked(true);\r\n            return;\r\n          }\r\n        } catch (err) {\r\n          console.error('Session verification error:', err);\r\n        }\r\n      }\r\n\r\n      try {\r\n        const { data: { user: supabaseUser } } = await supabase.auth.getUser();\r\n        \r\n        if (supabaseUser) {\r\n          setUserId(supabaseUser.id);\r\n          setAuthChecked(true);\r\n          return;\r\n        }\r\n      } catch (err) {\r\n        console.error('Supabase auth error:', err);\r\n      }\r\n\r\n      alert('Ä°lan vermek iÃ§in giriÅŸ yapmalÄ±sÄ±nÄ±z');\r\n      navigate('/auth/login');\r\n    };\r\n\r\n    checkAuth();\r\n  }, [navigate, user, customUser]);\r\n\r\n  // Auth kontrolÃ¼ tamamlanmadan form gÃ¶sterme\r\n  if (!authChecked) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-cyan-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <i className=\"ri-loader-4-line text-4xl text-purple-600 animate-spin\" />\r\n          <p className=\"text-sm text-gray-600 mt-4\">YÃ¼kleniyor...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const handleInputChange = (field: keyof FormData, value: string) => {\r\n    setFormData(prev => ({ ...prev, [field]: value }));\r\n    if (errors[field]) {\r\n      setErrors(prev => ({ ...prev, [field]: '' }));\r\n    }\r\n  };\r\n\r\n  // AI: Generate Title Suggestions\r\n  const generateTitleSuggestion = async () => {\r\n    if (!formData.category) {\r\n      alert('âš ï¸ Ã–nce kategori seÃ§in');\r\n      return;\r\n    }\r\n\r\n    // BaÅŸlÄ±k boÅŸsa, kullanÄ±cÄ±dan bilgi iste\r\n    if (!formData.title.trim()) {\r\n      alert('ğŸ’¡ Ä°pucu: Ã–nce Ã¼rÃ¼nÃ¼nÃ¼z hakkÄ±nda kÄ±sa bir baÅŸlÄ±k yazÄ±n (Ã¶rn: \"Laptop\"), AI bunu iyileÅŸtirecek.');\r\n      return;\r\n    }\r\n    \r\n    setAiLoading(true);\r\n    \r\n    try {\r\n      console.log('AI isteÄŸi gÃ¶nderiliyor...', {\r\n        category: formData.category,\r\n        title: formData.title,\r\n        condition: formData.condition\r\n      });\r\n      \r\n      const { data, error } = await supabase.functions.invoke('ai-assistant', {\r\n        body: {\r\n          action: 'suggest_title',\r\n          category: formData.category,\r\n          title: formData.title,\r\n          condition: formData.condition || 'used'\r\n        }\r\n      });\r\n\r\n      console.log('AI yanÄ±tÄ±:', { data, error });\r\n\r\n      if (error) {\r\n        console.error('Supabase function error:', error);\r\n        throw new Error(error.message || 'Edge Function hatasÄ±');\r\n      }\r\n\r\n      if (data?.success) {\r\n        handleInputChange('title', data.result);\r\n        alert('âœ¨ AI baÅŸlÄ±k Ã¶nerisi uygulandÄ±!');\r\n      } else {\r\n        throw new Error(data?.error || 'AI yanÄ±t veremedi');\r\n      }\r\n    } catch (error: any) {\r\n      console.error('AI error:', error);\r\n      \r\n      // DetaylÄ± hata mesajÄ±\r\n      let errorMessage = 'AI Ã¶nerisi alÄ±namadÄ±.';\r\n      \r\n      if (error.message?.includes('API anahtarÄ±')) {\r\n        errorMessage = 'âš ï¸ OpenAI API anahtarÄ± yapÄ±landÄ±rÄ±lmamÄ±ÅŸ!\\n\\nLÃ¼tfen Supabase Dashboard\\'a gidin:\\n1. Edge Functions â†’ Secrets\\n2. OPENAI_API_KEY ekleyin\\n3. Edge Function\\'Ä± yeniden deploy edin';\r\n      } else if (error.message?.includes('Failed to send')) {\r\n        errorMessage = 'âš ï¸ Edge Function\\'a baÄŸlanÄ±lamadÄ±!\\n\\nLÃ¼tfen kontrol edin:\\n1. Edge Function deploy edildi mi?\\n2. Supabase baÄŸlantÄ±sÄ± aktif mi?';\r\n      } else if (error.message) {\r\n        errorMessage = `Hata: ${error.message}`;\r\n      }\r\n      \r\n      alert(errorMessage);\r\n    } finally {\r\n      setAiLoading(false);\r\n    }\r\n  };\r\n\r\n  // AI: Apply Title Suggestion\r\n  const applyTitleSuggestion = (suggestion: string) => {\r\n    handleInputChange('title', suggestion);\r\n    setShowTitleSuggestions(false);\r\n  };\r\n\r\n  // AI: Improve Description\r\n  const improveDescription = async () => {\r\n    if (!formData.description.trim()) {\r\n      alert('âš ï¸ Ã–nce bir aÃ§Ä±klama yazÄ±n, AI bunu iyileÅŸtirecek.');\r\n      return;\r\n    }\r\n\r\n    setAiLoading(true);\r\n    \r\n    try {\r\n      console.log('AI isteÄŸi gÃ¶nderiliyor...', {\r\n        category: formData.category,\r\n        title: formData.title,\r\n        description: formData.description\r\n      });\r\n      \r\n      const { data, error } = await supabase.functions.invoke('ai-assistant', {\r\n        body: {\r\n          action: 'improve_text',\r\n          category: formData.category,\r\n          title: formData.title,\r\n          description: formData.description\r\n        }\r\n      });\r\n\r\n      console.log('AI yanÄ±tÄ±:', { data, error });\r\n\r\n      if (error) {\r\n        console.error('Supabase function error:', error);\r\n        throw new Error(error.message || 'Edge Function hatasÄ±');\r\n      }\r\n\r\n      if (data?.success) {\r\n        handleInputChange('description', data.result);\r\n        alert('ğŸª„ Metniniz AI tarafÄ±ndan iyileÅŸtirildi!');\r\n      } else {\r\n        throw new Error(data?.error || 'AI yanÄ±t veremedi');\r\n      }\r\n    } catch (error: any) {\r\n      console.error('AI error:', error);\r\n      \r\n      let errorMessage = 'Metin iyileÅŸtirilemedi.';\r\n      \r\n      if (error.message?.includes('API anahtarÄ±')) {\r\n        errorMessage = 'âš ï¸ OpenAI API anahtarÄ± yapÄ±landÄ±rÄ±lmamÄ±ÅŸ!';\r\n      } else if (error.message?.includes('Failed to send')) {\r\n        errorMessage = 'âš ï¸ Edge Function\\'a baÄŸlanÄ±lamadÄ±!';\r\n      } else if (error.message) {\r\n        errorMessage = `Hata: ${error.message}`;\r\n      }\r\n      \r\n      alert(errorMessage);\r\n    } finally {\r\n      setAiLoading(false);\r\n    }\r\n  };\r\n\r\n  // AI: Generate Description Template\r\n  const generateDescriptionTemplate = async () => {\r\n    if (!formData.category) {\r\n      alert('âš ï¸ Ã–nce kategori seÃ§in');\r\n      return;\r\n    }\r\n\r\n    // BaÅŸlÄ±k varsa daha iyi ÅŸablon Ã¼ret\r\n    if (!formData.title.trim()) {\r\n      alert('ğŸ’¡ Ä°pucu: Ã–nce bir baÅŸlÄ±k yazÄ±n, AI daha iyi aÃ§Ä±klama Ã¼retecek.');\r\n      return;\r\n    }\r\n    \r\n    setAiLoading(true);\r\n    \r\n    try {\r\n      console.log('AI isteÄŸi gÃ¶nderiliyor...', {\r\n        category: formData.category,\r\n        title: formData.title\r\n      });\r\n      \r\n      const { data, error } = await supabase.functions.invoke('ai-assistant', {\r\n        body: {\r\n          action: 'suggest_description',\r\n          category: formData.category,\r\n          title: formData.title || 'ÃœrÃ¼n'\r\n        }\r\n      });\r\n\r\n      console.log('AI yanÄ±tÄ±:', { data, error });\r\n\r\n      if (error) {\r\n        console.error('Supabase function error:', error);\r\n        throw new Error(error.message || 'Edge Function hatasÄ±');\r\n      }\r\n\r\n      if (data?.success) {\r\n        handleInputChange('description', data.result);\r\n        alert('ğŸ“ AI aÃ§Ä±klama ÅŸablonu oluÅŸturuldu!');\r\n      } else {\r\n        throw new Error(data?.error || 'AI yanÄ±t veremedi');\r\n      }\r\n    } catch (error: any) {\r\n      console.error('AI error:', error);\r\n      \r\n      let errorMessage = 'AÃ§Ä±klama ÅŸablonu oluÅŸturulamadÄ±.';\r\n      \r\n      if (error.message?.includes('API anahtarÄ±')) {\r\n        errorMessage = 'âš ï¸ OpenAI API anahtarÄ± yapÄ±landÄ±rÄ±lmamÄ±ÅŸ!';\r\n      } else if (error.message?.includes('Failed to send')) {\r\n        errorMessage = 'âš ï¸ Edge Function\\'a baÄŸlanÄ±lamadÄ±!';\r\n      } else if (error.message) {\r\n        errorMessage = `Hata: ${error.message}`;\r\n      }\r\n      \r\n      alert(errorMessage);\r\n    } finally {\r\n      setAiLoading(false);\r\n    }\r\n  };\r\n\r\n  // AI: Suggest Price\r\n  const suggestPrice = async () => {\r\n    if (!formData.category || !formData.title) {\r\n      alert('âš ï¸ Ã–nce kategori ve baÅŸlÄ±k girin');\r\n      return;\r\n    }\r\n\r\n    // BaÅŸlÄ±k Ã§ok kÄ±sa ise uyar\r\n    if (formData.title.trim().length < 3) {\r\n      alert('ğŸ’¡ Ä°pucu: Daha detaylÄ± bir baÅŸlÄ±k yazÄ±n (Ã¶rn: \"Dell Laptop i7\"), AI daha doÄŸru fiyat Ã¶nerecek.');\r\n      return;\r\n    }\r\n\r\n    setAiLoading(true);\r\n    \r\n    try {\r\n      console.log('AI isteÄŸi gÃ¶nderiliyor...', {\r\n        category: formData.category,\r\n        title: formData.title,\r\n        description: formData.description,\r\n        condition: formData.condition\r\n      });\r\n      \r\n      const { data, error } = await supabase.functions.invoke('ai-assistant-cached', {\r\n        body: {\r\n          action: 'suggest_price',\r\n          category: formData.category,\r\n          title: formData.title,\r\n          description: formData.description,\r\n          condition: formData.condition || 'Az KullanÄ±lmÄ±ÅŸ'\r\n        }\r\n      });\r\n\r\n      console.log('AI yanÄ±tÄ±:', { data, error });\r\n\r\n      if (error) {\r\n        console.error('Supabase function error:', error);\r\n        throw new Error(error.message || 'Edge Function hatasÄ±');\r\n      }\r\n\r\n      if (data?.success) {\r\n        // Yeni cache-aware response format\r\n        const suggestedPrice = data.price || 0;\r\n        const isCached = data.cached || false;\r\n        const confidence = data.confidence || 0;\r\n        const resultText = data.result || '';\r\n        \r\n        handleInputChange('price', suggestedPrice.toString());\r\n        \r\n        // KullanÄ±cÄ±ya bilgi ver\r\n        const cacheInfo = isCached ? 'âš¡ Cache\\'den alÄ±ndÄ± (anÄ±nda)' : 'ğŸ” GÃ¼ncel piyasa verisi';\r\n        const confidenceInfo = confidence > 0 ? `\\nğŸ¯ GÃ¼venilirlik: ${(confidence * 100).toFixed(0)}%` : '';\r\n        \r\n        alert(`ğŸ’° AI Fiyat Ã–nerisi: ${resultText}\\n\\n${cacheInfo}${confidenceInfo}\\n\\nÃ–nerilen fiyat forma eklendi: ${suggestedPrice.toLocaleString('tr-TR')} â‚º`);\r\n      } else {\r\n        throw new Error(data?.error || 'AI yanÄ±t veremedi');\r\n      }\r\n    } catch (error: any) {\r\n      console.error('AI error:', error);\r\n      \r\n      let errorMessage = 'Fiyat Ã¶nerisi alÄ±namadÄ±.';\r\n      \r\n      if (error.message?.includes('API anahtarÄ±')) {\r\n        errorMessage = 'âš ï¸ OpenAI API anahtarÄ± yapÄ±landÄ±rÄ±lmamÄ±ÅŸ!';\r\n      } else if (error.message?.includes('Failed to send')) {\r\n        errorMessage = 'âš ï¸ Edge Function\\'a baÄŸlanÄ±lamadÄ±!';\r\n      } else if (error.message) {\r\n        errorMessage = `Hata: ${error.message}`;\r\n      }\r\n      \r\n      alert(errorMessage);\r\n    } finally {\r\n      setAiLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleImageSelect = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const files = Array.from(e.target.files || []);\r\n    if (files.length + uploadedImages.length > 5) {\r\n      alert('En fazla 5 resim yÃ¼kleyebilirsiniz');\r\n      return;\r\n    }\r\n\r\n    setCompressing(true);\r\n\r\n    try {\r\n      const compressedFiles: File[] = [];\r\n      const newPreviewUrls: string[] = [];\r\n\r\n      for (const file of files) {\r\n        // Dosya boyutu kontrolÃ¼\r\n        const fileSizeMB = file.size / (1024 * 1024);\r\n        \r\n        if (file.type.startsWith('image/')) {\r\n          // Resim sÄ±kÄ±ÅŸtÄ±rma (max 0.9 MB)\r\n          if (fileSizeMB > 0.9) {\r\n            const compressed = await compressImage(file, 0.9);\r\n            compressedFiles.push(compressed);\r\n            \r\n            // Preview URL oluÅŸtur\r\n            const reader = new FileReader();\r\n            reader.onloadend = () => {\r\n              newPreviewUrls.push(reader.result as string);\r\n              if (newPreviewUrls.length === files.length) {\r\n                setPreviewUrls(prev => [...prev, ...newPreviewUrls]);\r\n              }\r\n            };\r\n            reader.readAsDataURL(compressed);\r\n          } else {\r\n            compressedFiles.push(file);\r\n            \r\n            // Preview URL oluÅŸtur\r\n            const reader = new FileReader();\r\n            reader.onloadend = () => {\r\n              newPreviewUrls.push(reader.result as string);\r\n              if (newPreviewUrls.length === files.length) {\r\n                setPreviewUrls(prev => [...prev, ...newPreviewUrls]);\r\n              }\r\n            };\r\n            reader.readAsDataURL(file);\r\n          }\r\n        } else if (file.type.startsWith('video/')) {\r\n          // Video boyut kontrolÃ¼ (max 5 MB)\r\n          if (fileSizeMB > 5) {\r\n            alert(`${file.name} Ã§ok bÃ¼yÃ¼k! Videolar maksimum 5 MB olmalÄ±dÄ±r.`);\r\n            continue;\r\n          }\r\n          compressedFiles.push(file);\r\n          \r\n          // Video preview\r\n          const reader = new FileReader();\r\n          reader.onloadend = () => {\r\n            newPreviewUrls.push(reader.result as string);\r\n            if (newPreviewUrls.length === files.length) {\r\n              setPreviewUrls(prev => [...prev, ...newPreviewUrls]);\r\n            }\r\n          };\r\n          reader.readAsDataURL(file);\r\n        }\r\n      }\r\n\r\n      setUploadedImages(prev => [...prev, ...compressedFiles]);\r\n    } catch (error) {\r\n      console.error('Resim sÄ±kÄ±ÅŸtÄ±rma hatasÄ±:', error);\r\n      alert('Resim iÅŸlenirken bir hata oluÅŸtu');\r\n    } finally {\r\n      setCompressing(false);\r\n    }\r\n  };\r\n\r\n  const removeImage = (index: number) => {\r\n    setUploadedImages(prev => prev.filter((_, i) => i !== index));\r\n    setPreviewUrls(prev => prev.filter((_, i) => i !== index));\r\n  };\r\n\r\n  const validateForm = (): boolean => {\r\n    const newErrors: Partial<FormData> = {};\r\n\r\n    if (!formData.title.trim()) newErrors.title = 'BaÅŸlÄ±k gerekli';\r\n    if (!formData.description.trim()) newErrors.description = 'AÃ§Ä±klama gerekli';\r\n    if (!formData.price || parseFloat(formData.price) <= 0) newErrors.price = 'GeÃ§erli bir fiyat girin';\r\n    if (!formData.category) newErrors.category = 'Kategori seÃ§in';\r\n    if (!formData.condition) newErrors.condition = 'Durum seÃ§in';\r\n    if (!formData.location.trim()) newErrors.location = 'Konum gerekli';\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const uploadImages = async (): Promise<string[]> => {\r\n    const uploadedPaths: string[] = [];\r\n\r\n    // KullanÄ±cÄ± telefon numarasÄ±nÄ± al\r\n    let userPhone = '';\r\n    try {\r\n      const { data: profileData } = await supabase\r\n        .from('profiles')\r\n        .select('phone')\r\n        .eq('id', userId)\r\n        .single();\r\n      \r\n      userPhone = profileData?.phone?.replace(/\\D/g, '') || userId || 'unknown';\r\n    } catch (err) {\r\n      console.error('Telefon numarasÄ± alÄ±namadÄ±:', err);\r\n      userPhone = userId || 'unknown';\r\n    }\r\n\r\n    // GeÃ§ici listing ID oluÅŸtur (gerÃ§ek ID insert sonrasÄ± gelecek)\r\n    const tempListingId = `temp_${Date.now()}`;\r\n\r\n    for (const file of uploadedImages) {\r\n      const fileExt = file.name.split('.').pop();\r\n      const fileName = `${Date.now()}_${Math.random().toString(36).substr(2, 9)}.${fileExt}`;\r\n      \r\n      // âœ… DoÄŸru path yapÄ±sÄ±: tel_no/listing_id/resim.jpeg\r\n      const filePath = `${userPhone}/${tempListingId}/${fileName}`;\r\n\r\n      const { error: uploadError } = await supabase.storage\r\n        .from('product-images')\r\n        .upload(filePath, file);\r\n\r\n      if (uploadError) {\r\n        console.error('Upload error:', uploadError);\r\n        throw new Error('Resim yÃ¼kleme hatasÄ±');\r\n      }\r\n\r\n      uploadedPaths.push(filePath);\r\n    }\r\n\r\n    return uploadedPaths;\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n\r\n    if (uploadedImages.length === 0) {\r\n      alert('En az 1 resim yÃ¼klemelisiniz');\r\n      return;\r\n    }\r\n\r\n    if (!userId) {\r\n      alert('KullanÄ±cÄ± bilgisi bulunamadÄ±. LÃ¼tfen tekrar giriÅŸ yapÄ±n.');\r\n      navigate('/auth/login');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      // KullanÄ±cÄ± bilgilerini al\r\n      let userPhone = '';\r\n      let userName = '';\r\n      \r\n      try {\r\n        const { data: profileData } = await supabase\r\n          .from('profiles')\r\n          .select('phone, full_name')\r\n          .eq('id', userId)\r\n          .single();\r\n        \r\n        userPhone = profileData?.phone || '';\r\n        userName = profileData?.full_name || 'SatÄ±cÄ±';\r\n      } catch (err) {\r\n        console.error('Profil bilgileri alÄ±namadÄ±:', err);\r\n      }\r\n\r\n      const imagePaths = await uploadImages();\r\n\r\n      // âœ… Image URL'lerini oluÅŸtur\r\n      const imageUrls = imagePaths.map(path => {\r\n        const { data } = supabase.storage\r\n          .from('product-images')\r\n          .getPublicUrl(path);\r\n        return data.publicUrl;\r\n      });\r\n\r\n      const conditionMap: { [key: string]: string } = {\r\n        'SÄ±fÄ±r': 'new',\r\n        'Az KullanÄ±lmÄ±ÅŸ': 'used',\r\n        'Ä°yi Durumda': 'used',\r\n        'Orta Durumda': 'used'\r\n      };\r\n\r\n      const dbCondition = conditionMap[formData.condition] || 'used';\r\n\r\n      // âœ… Metadata oluÅŸtur (WhatsApp agent iÃ§in)\r\n      const metadata = {\r\n        source: 'web',\r\n        created_via: 'manual',\r\n        user_agent: navigator.userAgent,\r\n        created_at: new Date().toISOString()\r\n      };\r\n\r\n      const { data, error } = await supabase\r\n        .from('listings')\r\n        .insert({\r\n          user_id: userId,\r\n          title: formData.title,\r\n          description: formData.description,\r\n          price: parseFloat(formData.price),\r\n          category: formData.category,\r\n          condition: dbCondition,\r\n          location: formData.location,\r\n          image_url: imageUrls[0], // Ä°lk resim\r\n          images: imagePaths, // âœ… TÃ¼m resim path'leri JSON array olarak\r\n          metadata: metadata, // âœ… Metadata eklendi\r\n          user_name: userName,\r\n          user_phone: userPhone,\r\n          status: 'active',\r\n          is_premium: false,\r\n          view_count: 0,\r\n          created_at: new Date().toISOString()\r\n        })\r\n        .select()\r\n        .single();\r\n\r\n      if (error) {\r\n        console.error('Insert error:', error);\r\n        throw error;\r\n      }\r\n\r\n      // âœ… GerÃ§ek listing ID ile path'leri gÃ¼ncelle\r\n      if (data && data.id) {\r\n        const realListingId = data.id;\r\n        const updatedPaths: string[] = [];\r\n\r\n        for (const oldPath of imagePaths) {\r\n          // Eski path: tel_no/temp_xxx/resim.jpeg\r\n          // Yeni path: tel_no/listing_id/resim.jpeg\r\n          const fileName = oldPath.split('/').pop();\r\n          const phoneNumber = oldPath.split('/')[0];\r\n          const newPath = `${phoneNumber}/${realListingId}/${fileName}`;\r\n\r\n          // Storage'da dosyayÄ± taÅŸÄ±\r\n          const { error: moveError } = await supabase.storage\r\n            .from('product-images')\r\n            .move(oldPath, newPath);\r\n\r\n          if (moveError) {\r\n            console.error('Move error:', moveError);\r\n            // TaÅŸÄ±ma baÅŸarÄ±sÄ±z olursa eski path'i kullan\r\n            updatedPaths.push(oldPath);\r\n          } else {\r\n            updatedPaths.push(newPath);\r\n          }\r\n        }\r\n\r\n        // âœ… GÃ¼ncellenmiÅŸ path'leri ve URL'leri kaydet\r\n        const updatedUrls = updatedPaths.map(path => {\r\n          const { data: urlData } = supabase.storage\r\n            .from('product-images')\r\n            .getPublicUrl(path);\r\n          return urlData.publicUrl;\r\n        });\r\n\r\n        await supabase\r\n          .from('listings')\r\n          .update({\r\n            images: updatedPaths,\r\n            image_url: updatedUrls[0]\r\n          })\r\n          .eq('id', realListingId);\r\n      }\r\n\r\n      alert('Ä°lan baÅŸarÄ±yla oluÅŸturuldu! ğŸ‰');\r\n      navigate(`/listing/${data.id}`);\r\n    } catch (error: any) {\r\n      console.error('Error creating listing:', error);\r\n      \r\n      if (error.message?.includes('violates foreign key constraint')) {\r\n        alert('KullanÄ±cÄ± bilgisi doÄŸrulanamadÄ±. LÃ¼tfen Ã§Ä±kÄ±ÅŸ yapÄ±p tekrar giriÅŸ yapÄ±n.');\r\n        localStorage.removeItem('session_token');\r\n        localStorage.removeItem('user_id');\r\n        navigate('/auth/login');\r\n      } else {\r\n        alert('Ä°lan oluÅŸturulurken bir hata oluÅŸtu. LÃ¼tfen tekrar deneyin.');\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-cyan-50\">\r\n      <TopNavigation isScrolled={isScrolled} />\r\n\r\n      <div className=\"pt-24 pb-16\">\r\n        <div className=\"max-w-4xl mx-auto px-6\">\r\n          {/* Header with AI Toggle */}\r\n          <motion.div\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            className=\"mb-8\"\r\n          >\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h1 className=\"text-4xl lg:text-5xl font-display font-bold\">\r\n                <span className=\"bg-gradient-primary bg-clip-text text-transparent\">\r\n                  Yeni Ä°lan OluÅŸtur\r\n                </span>\r\n              </h1>\r\n              \r\n              {/* AI Assistant Toggle */}\r\n              <button\r\n                onClick={() => setShowAIAssistant(!showAIAssistant)}\r\n                className={`px-4 py-2 rounded-full flex items-center space-x-2 transition-all cursor-pointer whitespace-nowrap ${\r\n                  showAIAssistant\r\n                    ? 'bg-gradient-primary text-white shadow-lg'\r\n                    : 'bg-white text-gray-700 border border-gray-300 hover:border-purple-500'\r\n                }`}\r\n              >\r\n                <i className=\"ri-robot-2-line text-lg\" />\r\n                <span className=\"text-sm font-medium\">AI Asistan</span>\r\n              </button>\r\n            </div>\r\n            <p className=\"text-lg text-gray-600\">\r\n              ÃœrÃ¼nÃ¼nÃ¼zÃ¼ satmak iÃ§in detaylarÄ± doldurun\r\n            </p>\r\n          </motion.div>\r\n\r\n          {/* AI Assistant Panel */}\r\n          <AnimatePresence>\r\n            {showAIAssistant && (\r\n              <motion.div\r\n                initial={{ opacity: 0, height: 0 }}\r\n                animate={{ opacity: 1, height: 'auto' }}\r\n                exit={{ opacity: 0, height: 0 }}\r\n                className=\"mb-6 overflow-hidden\"\r\n              >\r\n                <div className=\"bg-gradient-to-r from-purple-500 to-blue-500 rounded-2xl p-6 text-white\">\r\n                  <div className=\"flex items-start space-x-4\">\r\n                    <div className=\"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center flex-shrink-0\">\r\n                      <i className=\"ri-robot-2-fill text-2xl\" />\r\n                    </div>\r\n                    <div className=\"flex-1\">\r\n                      <h3 className=\"text-lg font-bold mb-2\">ğŸ¤– AI Asistan Aktif</h3>\r\n                      <p className=\"text-sm text-white/90 mb-4\">\r\n                        Merhaba! Ä°lan oluÅŸtururken size yardÄ±mcÄ± olabilirim. BaÅŸlÄ±k Ã¶nerileri, aÃ§Ä±klama ÅŸablonlarÄ± ve fiyat Ã¶nerileri sunabilirim.\r\n                      </p>\r\n                      <div className=\"grid grid-cols-2 gap-3\">\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={generateTitleSuggestion}\r\n                          disabled={!formData.category || aiLoading}\r\n                          className=\"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-medium transition-all cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap\"\r\n                        >\r\n                          {aiLoading ? (\r\n                            <>\r\n                              <i className=\"ri-loader-4-line animate-spin mr-1\" />\r\n                              YÃ¼kleniyor...\r\n                            </>\r\n                          ) : (\r\n                            'âœ¨ BaÅŸlÄ±k Ã–ner'\r\n                          )}\r\n                        </button>\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={generateDescriptionTemplate}\r\n                          disabled={!formData.category || aiLoading}\r\n                          className=\"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-medium transition-all cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap\"\r\n                        >\r\n                          {aiLoading ? (\r\n                            <>\r\n                              <i className=\"ri-loader-4-line animate-spin mr-1\" />\r\n                              YÃ¼kleniyor...\r\n                            </>\r\n                          ) : (\r\n                            'ğŸ“ AÃ§Ä±klama Åablonu'\r\n                          )}\r\n                        </button>\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={improveDescription}\r\n                          disabled={!formData.description.trim() || aiLoading}\r\n                          className=\"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-medium transition-all cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap\"\r\n                        >\r\n                          {aiLoading ? (\r\n                            <>\r\n                              <i className=\"ri-loader-4-line animate-spin mr-1\" />\r\n                              YÃ¼kleniyor...\r\n                            </>\r\n                          ) : (\r\n                            'ğŸª„ Metni Ä°yileÅŸtir'\r\n                          )}\r\n                        </button>\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={suggestPrice}\r\n                          disabled={!formData.category || !formData.title || aiLoading}\r\n                          className=\"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-medium transition-all cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap\"\r\n                        >\r\n                          {aiLoading ? (\r\n                            <>\r\n                              <i className=\"ri-loader-4-line animate-spin mr-1\" />\r\n                              YÃ¼kleniyor...\r\n                            </>\r\n                          ) : (\r\n                            'ğŸ’° Fiyat Ã–ner'\r\n                          )}\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </motion.div>\r\n            )}\r\n          </AnimatePresence>\r\n\r\n          {/* Form */}\r\n          <motion.form\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ delay: 0.1 }}\r\n            onSubmit={handleSubmit}\r\n            className=\"bg-white rounded-3xl shadow-xl p-8 space-y-6\"\r\n          >\r\n            {/* Image Upload */}\r\n            <div>\r\n              <label className=\"block text-sm font-semibold text-gray-700 mb-3\">\r\n                ÃœrÃ¼n Resimleri <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <div className=\"grid grid-cols-5 gap-4\">\r\n                {previewUrls.map((url, index) => (\r\n                  <div key={index} className=\"relative group\">\r\n                    <img\r\n                      src={url}\r\n                      alt={`Preview ${index + 1}`}\r\n                      className=\"w-full h-24 object-cover rounded-lg\"\r\n                    />\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => removeImage(index)}\r\n                      className=\"absolute top-1 right-1 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer\"\r\n                      aria-label={`Resmi kaldÄ±r ${index + 1}`}\r\n                    >\r\n                      <i className=\"ri-close-line text-sm\" />\r\n                    </button>\r\n                  </div>\r\n                ))}\r\n                \r\n                {uploadedImages.length < 5 && (\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => fileInputRef.current?.click()}\r\n                    disabled={compressing}\r\n                    className=\"w-full h-24 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center hover:border-purple-500 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                  >\r\n                    {compressing ? (\r\n                      <>\r\n                        <i className=\"ri-loader-4-line text-2xl text-purple-500 animate-spin\" />\r\n                        <span className=\"text-xs text-gray-500 mt-1\">Ä°ÅŸleniyor...</span>\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <i className=\"ri-add-line text-2xl text-gray-400\" />\r\n                        <span className=\"text-xs text-gray-500 mt-1\">Ekle</span>\r\n                      </>\r\n                    )}\r\n                  </button>\r\n                )}\r\n              </div>\r\n              <input\r\n                ref={fileInputRef}\r\n                type=\"file\"\r\n                accept=\"image/*,video/*\"\r\n                multiple\r\n                onChange={handleImageSelect}\r\n                className=\"hidden\"\r\n                title=\"Medya dosyalarÄ± seÃ§\"\r\n                aria-label=\"Resim veya video yÃ¼kle\"\r\n              />\r\n              <p className=\"text-xs text-gray-500 mt-2\">\r\n                ğŸ“· Resimler: Max 0.9 MB (otomatik sÄ±kÄ±ÅŸtÄ±rÄ±lÄ±r) â€¢ ğŸ¥ Videolar: Max 5 MB â€¢ En fazla 5 dosya\r\n              </p>\r\n            </div>\r\n\r\n            {/* Category & Condition */}\r\n            <div className=\"grid md:grid-cols-2 gap-6\">\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                  Kategori <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <select\r\n                  value={formData.category}\r\n                  onChange={(e) => handleInputChange('category', e.target.value)}\r\n                  className={`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 cursor-pointer text-sm ${\r\n                    errors.category ? 'border-red-500' : 'border-gray-300'\r\n                  }`}\r\n                  aria-label=\"Ä°lan kategorisi seÃ§\"\r\n                  title=\"Kategori seÃ§in\"\r\n                >\r\n                  <option value=\"\">Kategori SeÃ§in</option>\r\n                  {categories.map(cat => (\r\n                    <option key={cat} value={cat}>{cat}</option>\r\n                  ))}\r\n                </select>\r\n                {errors.category && <p className=\"text-red-500 text-xs mt-1\">{errors.category}</p>}\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                  Durum <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <select\r\n                  value={formData.condition}\r\n                  onChange={(e) => handleInputChange('condition', e.target.value)}\r\n                  className={`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 cursor-pointer text-sm ${\r\n                    errors.condition ? 'border-red-500' : 'border-gray-300'\r\n                  }`}\r\n                  aria-label=\"ÃœrÃ¼n durumu seÃ§\"\r\n                  title=\"Durum seÃ§in\"\r\n                >\r\n                  <option value=\"\">Durum SeÃ§in</option>\r\n                  {conditions.map(cond => (\r\n                    <option key={cond} value={cond}>{cond}</option>\r\n                  ))}\r\n                </select>\r\n                {errors.condition && <p className=\"text-red-500 text-xs mt-1\">{errors.condition}</p>}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Title with AI Suggestions */}\r\n            <div>\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <label className=\"block text-sm font-semibold text-gray-700\">\r\n                  Ä°lan BaÅŸlÄ±ÄŸÄ± <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                {showAIAssistant && formData.category && (\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={generateTitleSuggestion}\r\n                    disabled={aiLoading || !formData.title.trim()}\r\n                    className=\"text-xs text-purple-600 hover:text-purple-700 font-medium cursor-pointer whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                  >\r\n                    {aiLoading ? (\r\n                      <>\r\n                        <i className=\"ri-loader-4-line animate-spin mr-1\" />\r\n                        YÃ¼kleniyor...\r\n                      </>\r\n                    ) : (\r\n                      'âœ¨ Ä°yileÅŸtir'\r\n                    )}\r\n                  </button>\r\n                )}\r\n              </div>\r\n              <input\r\n                type=\"text\"\r\n                value={formData.title}\r\n                onChange={(e) => handleInputChange('title', e.target.value)}\r\n                placeholder=\"Ã–rn: Dell Laptop i7 16GB RAM\"\r\n                className={`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm ${\r\n                  errors.title ? 'border-red-500' : 'border-gray-300'\r\n                }`}\r\n              />\r\n              {errors.title && <p className=\"text-red-500 text-xs mt-1\">{errors.title}</p>}\r\n              {showAIAssistant && formData.category && !formData.title.trim() && (\r\n                <p className=\"text-xs text-gray-500 mt-1\">\r\n                  ğŸ’¡ Ã–nce Ã¼rÃ¼nÃ¼nÃ¼zÃ¼ kÄ±saca yazÄ±n (Ã¶rn: \"Laptop\"), AI iyileÅŸtirecek\r\n                </p>\r\n              )}\r\n              \r\n              {/* Title Suggestions Dropdown */}\r\n              <AnimatePresence>\r\n                {showTitleSuggestions && formData.category && (\r\n                  <motion.div\r\n                    initial={{ opacity: 0, y: -10 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    exit={{ opacity: 0, y: -10 }}\r\n                    className=\"mt-2 bg-white border border-purple-200 rounded-lg shadow-lg p-3 space-y-2\"\r\n                  >\r\n                    <div className=\"flex items-center justify-between mb-2\">\r\n                      <span className=\"text-xs font-semibold text-gray-700\">ğŸ’¡ BaÅŸlÄ±k Ã–nerileri</span>\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => setShowTitleSuggestions(false)}\r\n                        className=\"text-gray-400 hover:text-gray-600 cursor-pointer\"\r\n                        aria-label=\"Ã–nerileri kapat\"\r\n                      >\r\n                        <i className=\"ri-close-line\" />\r\n                      </button>\r\n                    </div>\r\n                    {titleSuggestions[formData.category]?.map((suggestion, idx) => (\r\n                      <button\r\n                        key={idx}\r\n                        type=\"button\"\r\n                        onClick={() => applyTitleSuggestion(suggestion)}\r\n                        className=\"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-purple-50 rounded-lg transition-colors cursor-pointer\"\r\n                      >\r\n                        {suggestion}\r\n                      </button>\r\n                    ))}\r\n                  </motion.div>\r\n                )}\r\n              </AnimatePresence>\r\n            </div>\r\n\r\n            {/* Description with AI Tools */}\r\n            <div>\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <label className=\"block text-sm font-semibold text-gray-700\">\r\n                  AÃ§Ä±klama <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                {showAIAssistant && formData.description.trim() && (\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={improveDescription}\r\n                    disabled={aiLoading}\r\n                    className=\"text-xs text-purple-600 hover:text-purple-700 font-medium cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap\"\r\n                  >\r\n                    {aiLoading ? (\r\n                      <>\r\n                        <i className=\"ri-loader-4-line animate-spin mr-1\" />\r\n                        Ä°yileÅŸtiriliyor...\r\n                      </>\r\n                    ) : (\r\n                      <>ğŸª„ Metni Ä°yileÅŸtir</>\r\n                    )}\r\n                  </button>\r\n                )}\r\n              </div>\r\n              <textarea\r\n                value={formData.description}\r\n                onChange={(e) => handleInputChange('description', e.target.value)}\r\n                placeholder=\"ÃœrÃ¼nÃ¼nÃ¼z hakkÄ±nda detaylÄ± bilgi verin...\"\r\n                rows={5}\r\n                maxLength={500}\r\n                className={`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 resize-none text-sm ${\r\n                  errors.description ? 'border-red-500' : 'border-gray-300'\r\n                }`}\r\n              />\r\n              <div className=\"flex items-center justify-between mt-1\">\r\n                {errors.description && <p className=\"text-red-500 text-xs\">{errors.description}</p>}\r\n                <p className=\"text-xs text-gray-500 ml-auto\">\r\n                  {formData.description.length}/500\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Price & Location */}\r\n            <div className=\"grid md:grid-cols-2 gap-6\">\r\n              <div>\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <label className=\"block text-sm font-semibold text-gray-700\">\r\n                    Fiyat (â‚º) <span className=\"text-red-500\">*</span>\r\n                  </label>\r\n                  {showAIAssistant && formData.category && formData.title && (\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={suggestPrice}\r\n                      disabled={aiLoading}\r\n                      className=\"text-xs text-purple-600 hover:text-purple-700 font-medium cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap\"\r\n                    >\r\n                      ğŸ’° Ã–ner\r\n                    </button>\r\n                  )}\r\n                </div>\r\n                <input\r\n                  type=\"number\"\r\n                  value={formData.price}\r\n                  onChange={(e) => handleInputChange('price', e.target.value)}\r\n                  placeholder=\"0\"\r\n                  min=\"0\"\r\n                  step=\"0.01\"\r\n                  className={`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm ${\r\n                    errors.price ? 'border-red-500' : 'border-gray-300'\r\n                  }`}\r\n                />\r\n                {errors.price && <p className=\"text-red-500 text-xs mt-1\">{errors.price}</p>}\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                  Konum <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.location}\r\n                  onChange={(e) => handleInputChange('location', e.target.value)}\r\n                  placeholder=\"Ã–rn: Ä°stanbul, KadÄ±kÃ¶y\"\r\n                  className={`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm ${\r\n                    errors.location ? 'border-red-500' : 'border-gray-300'\r\n                  }`}\r\n                />\r\n                {errors.location && <p className=\"text-red-500 text-xs mt-1\">{errors.location}</p>}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Submit Button */}\r\n            <div className=\"flex items-center justify-end space-x-4 pt-6 border-t\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => navigate('/listings')}\r\n                className=\"px-6 py-3 text-sm font-semibold text-gray-700 bg-gray-100 rounded-full hover:bg-gray-200 transition-all whitespace-nowrap cursor-pointer\"\r\n              >\r\n                Ä°ptal\r\n              </button>\r\n              <button\r\n                type=\"submit\"\r\n                disabled={loading || compressing}\r\n                className=\"px-8 py-3 text-sm font-semibold text-white bg-gradient-primary rounded-full hover:shadow-lg hover:scale-105 transition-all disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap cursor-pointer\"\r\n              >\r\n                {loading ? (\r\n                  <>\r\n                    <i className=\"ri-loader-4-line animate-spin mr-2\" />\r\n                    YÃ¼kleniyor...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <i className=\"ri-check-line mr-2\" />\r\n                    Ä°lanÄ± YayÄ±nla\r\n                  </>\r\n                )}\r\n              </button>\r\n            </div>\r\n          </motion.form>\r\n        </div>\r\n      </div>\r\n\r\n      <Footer />\r\n      <ChatBox />\r\n    </div>\r\n  );\r\n}\r\n"],"names":["categories","conditions","titleSuggestions","compressImage","file","maxSizeMB","resolve","reject","reader","event","img","canvas","width","height","maxDimension","quality","maxSizeBytes","tryCompress","q","blob","compressedFile","CreateListingPage","navigate","useNavigate","isScrolled","setIsScrolled","useState","loading","setLoading","uploadedImages","setUploadedImages","previewUrls","setPreviewUrls","compressing","setCompressing","fileInputRef","useRef","userId","setUserId","authChecked","setAuthChecked","user","customUser","useAuthStore","formData","setFormData","errors","setErrors","showAIAssistant","setShowAIAssistant","aiLoading","setAiLoading","showTitleSuggestions","setShowTitleSuggestions","showDescriptionSuggestions","setShowDescriptionSuggestions","useEffect","sessionToken","storedUserId","data","error","supabase","err","supabaseUser","jsxs","jsx","handleInputChange","field","value","prev","generateTitleSuggestion","errorMessage","applyTitleSuggestion","suggestion","improveDescription","generateDescriptionTemplate","suggestPrice","suggestedPrice","isCached","confidence","resultText","cacheInfo","confidenceInfo","handleImageSelect","e","files","compressedFiles","newPreviewUrls","fileSizeMB","compressed","removeImage","index","_","i","validateForm","newErrors","uploadImages","uploadedPaths","userPhone","profileData","tempListingId","fileExt","fileName","filePath","uploadError","handleSubmit","userName","imagePaths","imageUrls","path","dbCondition","metadata","realListingId","updatedPaths","oldPath","newPath","moveError","updatedUrls","urlData","TopNavigation","motion","AnimatePresence","Fragment","url","cat","cond","idx","Footer","ChatBox"],"mappings":"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"}