import{j as e,u as D,r as m}from"./index-CG8BtuKQ.js";import{m as b}from"./proxy-BKaF46vR.js";import{A as E,C as R}from"./ChatBox-BLCoYUWw.js";import{T as P}from"./TopNavigation-B4KEoh3H.js";import{F as T}from"./Footer-B0R4p1RB.js";import{s as N}from"./supabase-ChMZ-R7X.js";const C=[{id:"Elektronik",name:"Elektronik",icon:"ri-smartphone-line"},{id:"Otomotiv",name:"Otomotiv",icon:"ri-car-line"},{id:"Emlak",name:"Emlak",icon:"ri-home-4-line"},{id:"Mobilya & Dekorasyon",name:"Mobilya & Dekorasyon",icon:"ri-sofa-line"},{id:"Giyim & Aksesuar",name:"Giyim & Aksesuar",icon:"ri-shirt-line"},{id:"GÄ±da & Ä°Ã§ecek",name:"GÄ±da & Ä°Ã§ecek",icon:"ri-restaurant-line"},{id:"Kozmetik & KiÅŸisel BakÄ±m",name:"Kozmetik & KiÅŸisel BakÄ±m",icon:"ri-heart-pulse-line"},{id:"Kozmetik & BakÄ±m",name:"Kozmetik & BakÄ±m",icon:"ri-heart-pulse-line"},{id:"Kitap, Dergi & MÃ¼zik",name:"Kitap, Dergi & MÃ¼zik",icon:"ri-book-line"},{id:"Spor & Outdoor",name:"Spor & Outdoor",icon:"ri-basketball-line"},{id:"Anne, Bebek & Oyuncak",name:"Anne, Bebek & Oyuncak",icon:"ri-bear-smile-line"},{id:"Hayvan & Pet Shop",name:"Hayvan & Pet Shop",icon:"ri-footprint-line"},{id:"YapÄ± Market & BahÃ§e",name:"YapÄ± Market & BahÃ§e",icon:"ri-hammer-line"},{id:"Hobi & Oyun",name:"Hobi & Oyun",icon:"ri-gamepad-line"},{id:"Sanat & Zanaat",name:"Sanat & Zanaat",icon:"ri-palette-line"},{id:"Ä°ÅŸ & Sanayi",name:"Ä°ÅŸ & Sanayi",icon:"ri-building-line"},{id:"EÄŸitim & Kurs",name:"EÄŸitim & Kurs",icon:"ri-graduation-cap-line"},{id:"Etkinlik & Bilet",name:"Etkinlik & Bilet",icon:"ri-ticket-line"},{id:"Hizmetler",name:"Hizmetler",icon:"ri-service-line"},{id:"DiÄŸer",name:"DiÄŸer",icon:"ri-more-line"}],L=[{id:"sifir",name:"SÄ±fÄ±r"},{id:"az-kullanilmis",name:"Az KullanÄ±lmÄ±ÅŸ"},{id:"kullanilmis",name:"KullanÄ±lmÄ±ÅŸ"}],A=[{id:"all",name:"TÃ¼m Zamanlar"},{id:"today",name:"BugÃ¼n"},{id:"week",name:"Son 7 GÃ¼n"},{id:"month",name:"Son 30 GÃ¼n"}];function B({filters:a,onFilterChange:i}){const o=t=>{const n=a.categories.includes(t)?a.categories.filter(x=>x!==t):[...a.categories,t];i({categories:n})},c=t=>{const n=a.condition.includes(t)?a.condition.filter(x=>x!==t):[...a.condition,t];i({condition:n})};return e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 sticky top-28",children:[e.jsx("h3",{className:"text-lg font-bold mb-6",children:"Filtreler"}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Kategoriler"}),e.jsx("div",{className:"space-y-2",children:C.map(t=>e.jsxs(b.button,{onClick:()=>o(t.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all cursor-pointer ${a.categories.includes(t.id)?"bg-gradient-primary text-white shadow-md":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx("i",{className:`${t.icon} text-lg`}),e.jsx("span",{className:"text-sm font-medium",children:t.name})]},t.id))})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Fiyat AralÄ±ÄŸÄ±"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"number",value:a.priceRange[0],onChange:t=>i({priceRange:[Number(t.target.value),a.priceRange[1]]}),placeholder:"Min",className:"w-full px-4 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"}),e.jsx("span",{className:"text-gray-400",children:"-"}),e.jsx("input",{type:"number",value:a.priceRange[1],onChange:t=>i({priceRange:[a.priceRange[0],Number(t.target.value)]}),placeholder:"Max",className:"w-full px-4 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[a.priceRange[0].toLocaleString("tr-TR")," â‚º - ",a.priceRange[1].toLocaleString("tr-TR")," â‚º"]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Konum"}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"ri-map-pin-line absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:a.location,onChange:t=>i({location:t.target.value}),placeholder:"Åžehir veya ilÃ§e ara...",className:"w-full pl-11 pr-4 py-3 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-4",children:"ÃœrÃ¼n Durumu"}),e.jsx("div",{className:"space-y-2",children:L.map(t=>e.jsxs("label",{className:"flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.condition.includes(t.id),onChange:()=>c(t.id),className:"w-5 h-5 rounded border-gray-300 text-primary-600 focus:ring-primary-500 cursor-pointer"}),e.jsx("span",{className:"text-sm text-gray-700",children:t.name})]},t.id))})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Ä°lan Tarihi"}),e.jsx("select",{value:a.dateRange,onChange:t=>i({dateRange:t.target.value}),className:"w-full px-4 py-3 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 cursor-pointer",children:A.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center space-x-3 px-4 py-3 rounded-lg bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 cursor-pointer hover:shadow-md transition-all",children:[e.jsx("input",{type:"checkbox",checked:a.isPremium,onChange:t=>i({isPremium:t.target.checked}),className:"w-5 h-5 rounded border-amber-300 text-amber-600 focus:ring-amber-500 cursor-pointer"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"ri-vip-crown-fill text-amber-600"}),e.jsx("span",{className:"text-sm font-semibold text-amber-900",children:"Sadece Premium Ä°lanlar"})]})]})})]})}function F({listing:a,viewMode:i,index:o}){const c=D(),t=x=>{const y=new Date,p=new Date(x),u=y.getTime()-p.getTime(),j=Math.floor(u/6e4),f=Math.floor(u/36e5),r=Math.floor(u/864e5);return j<60?`${j} dakika Ã¶nce`:f<24?`${f} saat Ã¶nce`:r<7?`${r} gÃ¼n Ã¶nce`:p.toLocaleDateString("tr-TR")},n=()=>{c(`/listing/${a.id}`)};return i==="list"?e.jsx(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o*.05},onClick:n,className:"bg-white rounded-2xl shadow-md hover:shadow-xl transition-all overflow-hidden cursor-pointer group",children:e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"relative w-64 h-48 flex-shrink-0",children:[e.jsx("img",{src:a.image,alt:a.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),a.isPremium&&e.jsxs("div",{className:"absolute top-3 left-3 px-3 py-1 bg-gradient-to-r from-amber-400 to-orange-500 text-white text-xs font-bold rounded-full flex items-center space-x-1",children:[e.jsx("i",{className:"ri-vip-crown-fill"}),e.jsx("span",{children:"Premium"})]})]}),e.jsxs("div",{className:"flex-1 p-6 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 group-hover:text-primary-600 transition-colors",children:a.title}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:a.description})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-2xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:[a.price.toLocaleString("tr-TR")," â‚º"]})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-xs font-medium rounded-full",children:a.category}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:a.condition})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("i",{className:"ri-map-pin-line"}),e.jsx("span",{children:a.location})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("i",{className:"ri-eye-line"}),e.jsx("span",{children:a.views})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("i",{className:"ri-time-line"}),e.jsx("span",{children:t(a.createdAt)})]})]})]})]})}):e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o*.05},onClick:n,className:"bg-white rounded-2xl shadow-md hover:shadow-xl transition-all overflow-hidden cursor-pointer group","data-product-shop":!0,children:[e.jsxs("div",{className:"relative h-56 overflow-hidden",children:[e.jsx("img",{src:a.image,alt:a.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),a.isPremium&&e.jsxs("div",{className:"absolute top-3 right-3 px-3 py-1 bg-gradient-to-r from-amber-400 to-orange-500 text-white text-xs font-bold rounded-full flex items-center space-x-1",children:[e.jsx("i",{className:"ri-vip-crown-fill"}),e.jsx("span",{children:"Premium"})]}),e.jsx("div",{className:"absolute bottom-3 left-3 px-3 py-1 bg-white/90 backdrop-blur-sm rounded-full text-xs font-medium text-gray-700",children:a.category})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2 line-clamp-2 group-hover:text-primary-600 transition-colors",children:a.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:a.description}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"text-2xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:[a.price.toLocaleString("tr-TR")," â‚º"]}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:a.condition})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("i",{className:"ri-map-pin-line"}),e.jsx("span",{children:a.location})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("i",{className:"ri-eye-line"}),e.jsx("span",{children:a.views})]}),e.jsx("span",{children:t(a.createdAt)})]})]})]})]})}const K=!1;async function M(a){try{let i=N.from("listings").select("*").eq("status","active");if(a.categories&&a.categories.length>0&&(i=i.in("category",a.categories)),a.priceRange&&a.priceRange.length===2&&(i=i.gte("price",a.priceRange[0]).lte("price",a.priceRange[1])),a.location&&(i=i.ilike("location",`%${a.location}%`)),a.condition&&a.condition.length>0&&(i=i.in("condition",a.condition)),a.isPremium&&(i=i.eq("is_premium",!0)),a.dateRange&&a.dateRange!=="all"){const t=new Date;let n;switch(a.dateRange){case"today":n=new Date(t.setHours(0,0,0,0));break;case"week":n=new Date(t.setDate(t.getDate()-7));break;case"month":n=new Date(t.setMonth(t.getMonth()-1));break;default:n=new Date(0)}i=i.gte("created_at",n.toISOString())}i=i.order("created_at",{ascending:!1});const{data:o,error:c}=await i;if(c)throw console.error("Supabase query error:",c),c;return o||[]}catch(i){throw console.error("Error fetching listings (direct):",i),i}}async function z(a){try{if(!K)return console.log("ðŸ“¡ Fetching directly (Edge functions disabled)"),await M(a)}catch(i){throw console.error("Error fetching listings:",i),i}}const v=a=>{if(!a)return null;if(a.startsWith("http"))return a;const{data:i}=N.storage.from("product-images").getPublicUrl(a);return i.publicUrl||null};function q(){const[a,i]=m.useState(!1),[o,c]=m.useState("grid"),[t,n]=m.useState("newest"),[x,y]=m.useState(!1),[p,u]=m.useState([]),[j,f]=m.useState(!1),[r,w]=m.useState({categories:[],priceRange:[0,1e6],location:"",condition:[],isPremium:!1,dateRange:"all"});m.useEffect(()=>{const d=()=>{i(window.scrollY>50)};return window.addEventListener("scroll",d),()=>window.removeEventListener("scroll",d)},[]),m.useEffect(()=>{(async()=>{f(!0);try{let g=[...(await z(r)).map(s=>({id:s.id,title:s.title,description:s.description,price:s.price,category:s.category,location:s.location,condition:s.condition,image:v(s.images?.[0])||v(s.image_url)||"https://via.placeholder.com/400x300",images:s.images?.map(l=>v(l)).filter(l=>!!l),isPremium:s.is_premium||!1,views:s.views,createdAt:s.created_at,seller:{name:"KullanÄ±cÄ±",rating:4.5,verified:!1}}))];switch(t){case"newest":g.sort((s,l)=>new Date(l.createdAt).getTime()-new Date(s.createdAt).getTime());break;case"oldest":g.sort((s,l)=>new Date(s.createdAt).getTime()-new Date(l.createdAt).getTime());break;case"price-low":g.sort((s,l)=>s.price-l.price);break;case"price-high":g.sort((s,l)=>l.price-s.price);break;case"popular":g.sort((s,l)=>l.views-s.views);break}u(g)}catch(h){console.error("Failed to fetch from Supabase:",h),u([])}finally{f(!1)}})()},[r,t]);const k=d=>{w(h=>({...h,...d}))},S=()=>{w({categories:[],priceRange:[0,1e6],location:"",condition:[],isPremium:!1,dateRange:"all"})};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-cyan-50",children:[e.jsx(P,{isScrolled:a}),e.jsx("div",{className:"pt-24 pb-16",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl lg:text-5xl font-display font-bold mb-4",children:e.jsx("span",{className:"bg-gradient-primary bg-clip-text text-transparent",children:"TÃ¼m Ä°lanlar"})}),e.jsxs("p",{className:"text-lg text-gray-600",children:[p.length," ilan bulundu"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>y(!x),className:"flex items-center space-x-2 px-5 py-2.5 bg-white rounded-full shadow-md hover:shadow-lg transition-all whitespace-nowrap cursor-pointer",children:[e.jsx("i",{className:"ri-filter-3-line text-lg"}),e.jsx("span",{className:"text-sm font-medium",children:"Filtreler"}),(r.categories.length>0||r.condition.length>0||r.isPremium)&&e.jsx("span",{className:"w-5 h-5 bg-gradient-primary text-white text-xs rounded-full flex items-center justify-center",children:r.categories.length+r.condition.length+(r.isPremium?1:0)})]}),(r.categories.length>0||r.condition.length>0||r.isPremium||r.location)&&e.jsx("button",{onClick:S,className:"text-sm text-gray-600 hover:text-red-600 transition-colors whitespace-nowrap cursor-pointer",children:"Filtreleri Temizle"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:t,onChange:d=>n(d.target.value),className:"px-4 py-2.5 bg-white rounded-full shadow-md text-sm font-medium cursor-pointer focus:outline-none focus:ring-2 focus:ring-primary-500","aria-label":"Ä°lanlarÄ± sÄ±rala",children:[e.jsx("option",{value:"newest",children:"En Yeni"}),e.jsx("option",{value:"oldest",children:"En Eski"}),e.jsx("option",{value:"price-low",children:"Fiyat: DÃ¼ÅŸÃ¼kten YÃ¼kseÄŸe"}),e.jsx("option",{value:"price-high",children:"Fiyat: YÃ¼ksekten DÃ¼ÅŸÃ¼ÄŸe"}),e.jsx("option",{value:"popular",children:"En PopÃ¼ler"})]}),e.jsxs("div",{className:"flex items-center bg-white rounded-full shadow-md p-1",children:[e.jsx("button",{onClick:()=>c("grid"),className:`w-10 h-10 rounded-full flex items-center justify-center transition-all cursor-pointer ${o==="grid"?"bg-gradient-primary text-white":"text-gray-600 hover:text-gray-900"}`,"aria-label":"Izgara gÃ¶rÃ¼nÃ¼mÃ¼",children:e.jsx("i",{className:"ri-grid-line text-lg"})}),e.jsx("button",{onClick:()=>c("list"),className:`w-10 h-10 rounded-full flex items-center justify-center transition-all cursor-pointer ${o==="list"?"bg-gradient-primary text-white":"text-gray-600 hover:text-gray-900"}`,"aria-label":"Liste gÃ¶rÃ¼nÃ¼mÃ¼",children:e.jsx("i",{className:"ri-list-check text-lg"})})]})]})]}),e.jsxs("div",{className:"flex gap-8",children:[e.jsx(E,{children:x&&e.jsx(b.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"w-80 flex-shrink-0",children:e.jsx(B,{filters:r,onFilterChange:k})})}),e.jsx("div",{className:"flex-1",children:p.length===0?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("i",{className:"ri-inbox-line text-6xl text-gray-300 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Ä°lan BulunamadÄ±"}),e.jsx("p",{className:"text-gray-500",children:"Filtrelerinizi deÄŸiÅŸtirmeyi deneyin"})]}):e.jsx("div",{className:o==="grid"?"grid md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:p.map((d,h)=>e.jsx(F,{listing:d,viewMode:o,index:h},d.id))})})]})]})}),e.jsx(T,{}),e.jsx(R,{})]})}export{q as default};
//# sourceMappingURL=page-DWB17EHj.js.map
