{"version":3,"file":"page-DWB17EHj.js","sources":["../../src/pages/listings/components/FilterSidebar.tsx","../../src/pages/listings/components/ListingCard.tsx","../../src/services/supabase.ts","../../src/pages/listings/page.tsx"],"sourcesContent":["import { motion } from 'framer-motion';\r\nimport type { FilterState } from '../../../types/listing';\r\n\r\ninterface FilterSidebarProps {\r\n  filters: FilterState;\r\n  onFilterChange: (filters: Partial<FilterState>) => void;\r\n}\r\n\r\nconst categories = [\r\n  { id: 'Elektronik', name: 'Elektronik', icon: 'ri-smartphone-line' },\r\n  { id: 'Otomotiv', name: 'Otomotiv', icon: 'ri-car-line' },\r\n  { id: 'Emlak', name: 'Emlak', icon: 'ri-home-4-line' },\r\n  { id: 'Mobilya & Dekorasyon', name: 'Mobilya & Dekorasyon', icon: 'ri-sofa-line' },\r\n  { id: 'Giyim & Aksesuar', name: 'Giyim & Aksesuar', icon: 'ri-shirt-line' },\r\n  { id: 'Gƒ±da & ƒ∞√ßecek', name: 'Gƒ±da & ƒ∞√ßecek', icon: 'ri-restaurant-line' },\r\n  { id: 'Kozmetik & Ki≈üisel Bakƒ±m', name: 'Kozmetik & Ki≈üisel Bakƒ±m', icon: 'ri-heart-pulse-line' },\r\n  { id: 'Kozmetik & Bakƒ±m', name: 'Kozmetik & Bakƒ±m', icon: 'ri-heart-pulse-line' },\r\n  { id: 'Kitap, Dergi & M√ºzik', name: 'Kitap, Dergi & M√ºzik', icon: 'ri-book-line' },\r\n  { id: 'Spor & Outdoor', name: 'Spor & Outdoor', icon: 'ri-basketball-line' },\r\n  { id: 'Anne, Bebek & Oyuncak', name: 'Anne, Bebek & Oyuncak', icon: 'ri-bear-smile-line' },\r\n  { id: 'Hayvan & Pet Shop', name: 'Hayvan & Pet Shop', icon: 'ri-footprint-line' },\r\n  { id: 'Yapƒ± Market & Bah√ße', name: 'Yapƒ± Market & Bah√ße', icon: 'ri-hammer-line' },\r\n  { id: 'Hobi & Oyun', name: 'Hobi & Oyun', icon: 'ri-gamepad-line' },\r\n  { id: 'Sanat & Zanaat', name: 'Sanat & Zanaat', icon: 'ri-palette-line' },\r\n  { id: 'ƒ∞≈ü & Sanayi', name: 'ƒ∞≈ü & Sanayi', icon: 'ri-building-line' },\r\n  { id: 'Eƒüitim & Kurs', name: 'Eƒüitim & Kurs', icon: 'ri-graduation-cap-line' },\r\n  { id: 'Etkinlik & Bilet', name: 'Etkinlik & Bilet', icon: 'ri-ticket-line' },\r\n  { id: 'Hizmetler', name: 'Hizmetler', icon: 'ri-service-line' },\r\n  { id: 'Diƒüer', name: 'Diƒüer', icon: 'ri-more-line' },\r\n];\r\n\r\nconst conditions = [\r\n  { id: 'sifir', name: 'Sƒ±fƒ±r' },\r\n  { id: 'az-kullanilmis', name: 'Az Kullanƒ±lmƒ±≈ü' },\r\n  { id: 'kullanilmis', name: 'Kullanƒ±lmƒ±≈ü' },\r\n];\r\n\r\nconst dateRanges = [\r\n  { id: 'all', name: 'T√ºm Zamanlar' },\r\n  { id: 'today', name: 'Bug√ºn' },\r\n  { id: 'week', name: 'Son 7 G√ºn' },\r\n  { id: 'month', name: 'Son 30 G√ºn' },\r\n];\r\n\r\nexport default function FilterSidebar({ filters, onFilterChange }: FilterSidebarProps) {\r\n  const toggleCategory = (categoryId: string) => {\r\n    const newCategories = filters.categories.includes(categoryId)\r\n      ? filters.categories.filter(c => c !== categoryId)\r\n      : [...filters.categories, categoryId];\r\n    onFilterChange({ categories: newCategories });\r\n  };\r\n\r\n  const toggleCondition = (conditionId: string) => {\r\n    const newConditions = filters.condition.includes(conditionId)\r\n      ? filters.condition.filter(c => c !== conditionId)\r\n      : [...filters.condition, conditionId];\r\n    onFilterChange({ condition: newConditions });\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-2xl shadow-lg p-6 sticky top-28\">\r\n      <h3 className=\"text-lg font-bold mb-6\">Filtreler</h3>\r\n\r\n      {/* Kategoriler */}\r\n      <div className=\"mb-8\">\r\n        <h4 className=\"text-sm font-semibold text-gray-700 mb-4\">Kategoriler</h4>\r\n        <div className=\"space-y-2\">\r\n          {categories.map(category => (\r\n            <motion.button\r\n              key={category.id}\r\n              onClick={() => toggleCategory(category.id)}\r\n              className={`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all cursor-pointer ${\r\n                filters.categories.includes(category.id)\r\n                  ? 'bg-gradient-primary text-white shadow-md'\r\n                  : 'bg-gray-50 text-gray-700 hover:bg-gray-100'\r\n              }`}\r\n              whileHover={{ scale: 1.02 }}\r\n              whileTap={{ scale: 0.98 }}\r\n            >\r\n              <i className={`${category.icon} text-lg`} />\r\n              <span className=\"text-sm font-medium\">{category.name}</span>\r\n            </motion.button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Fiyat Aralƒ±ƒüƒ± */}\r\n      <div className=\"mb-8\">\r\n        <h4 className=\"text-sm font-semibold text-gray-700 mb-4\">Fiyat Aralƒ±ƒüƒ±</h4>\r\n        <div className=\"space-y-4\">\r\n          <div className=\"flex items-center space-x-4\">\r\n            <input\r\n              type=\"number\"\r\n              value={filters.priceRange[0]}\r\n              onChange={(e) =>\r\n                onFilterChange({ priceRange: [Number(e.target.value), filters.priceRange[1]] })\r\n              }\r\n              placeholder=\"Min\"\r\n              className=\"w-full px-4 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n            />\r\n            <span className=\"text-gray-400\">-</span>\r\n            <input\r\n              type=\"number\"\r\n              value={filters.priceRange[1]}\r\n              onChange={(e) =>\r\n                onFilterChange({ priceRange: [filters.priceRange[0], Number(e.target.value)] })\r\n              }\r\n              placeholder=\"Max\"\r\n              className=\"w-full px-4 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n            />\r\n          </div>\r\n          <div className=\"text-xs text-gray-500 text-center\">\r\n            {filters.priceRange[0].toLocaleString('tr-TR')} ‚Ç∫ - {filters.priceRange[1].toLocaleString('tr-TR')} ‚Ç∫\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Konum */}\r\n      <div className=\"mb-8\">\r\n        <h4 className=\"text-sm font-semibold text-gray-700 mb-4\">Konum</h4>\r\n        <div className=\"relative\">\r\n          <i className=\"ri-map-pin-line absolute left-4 top-1/2 -translate-y-1/2 text-gray-400\" />\r\n          <input\r\n            type=\"text\"\r\n            value={filters.location}\r\n            onChange={(e) => onFilterChange({ location: e.target.value })}\r\n            placeholder=\"≈ûehir veya il√ße ara...\"\r\n            className=\"w-full pl-11 pr-4 py-3 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Durum */}\r\n      <div className=\"mb-8\">\r\n        <h4 className=\"text-sm font-semibold text-gray-700 mb-4\">√úr√ºn Durumu</h4>\r\n        <div className=\"space-y-2\">\r\n          {conditions.map(condition => (\r\n            <label\r\n              key={condition.id}\r\n              className=\"flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer\"\r\n            >\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={filters.condition.includes(condition.id)}\r\n                onChange={() => toggleCondition(condition.id)}\r\n                className=\"w-5 h-5 rounded border-gray-300 text-primary-600 focus:ring-primary-500 cursor-pointer\"\r\n              />\r\n              <span className=\"text-sm text-gray-700\">{condition.name}</span>\r\n            </label>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Tarih */}\r\n      <div className=\"mb-8\">\r\n        <h4 className=\"text-sm font-semibold text-gray-700 mb-4\">ƒ∞lan Tarihi</h4>\r\n        <select\r\n          value={filters.dateRange}\r\n          onChange={(e) => onFilterChange({ dateRange: e.target.value })}\r\n          className=\"w-full px-4 py-3 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 cursor-pointer\"\r\n        >\r\n          {dateRanges.map(range => (\r\n            <option key={range.id} value={range.id}>\r\n              {range.name}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      {/* Premium */}\r\n      <div>\r\n        <label className=\"flex items-center space-x-3 px-4 py-3 rounded-lg bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 cursor-pointer hover:shadow-md transition-all\">\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={filters.isPremium}\r\n            onChange={(e) => onFilterChange({ isPremium: e.target.checked })}\r\n            className=\"w-5 h-5 rounded border-amber-300 text-amber-600 focus:ring-amber-500 cursor-pointer\"\r\n          />\r\n          <div className=\"flex items-center space-x-2\">\r\n            <i className=\"ri-vip-crown-fill text-amber-600\" />\r\n            <span className=\"text-sm font-semibold text-amber-900\">Sadece Premium ƒ∞lanlar</span>\r\n          </div>\r\n        </label>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { motion } from 'framer-motion';\nimport { useNavigate } from 'react-router-dom';\nimport type { Listing } from '../../../types/listing';\n\ninterface ListingCardProps {\n  listing: Listing;\n  viewMode: 'grid' | 'list';\n  index: number;\n}\n\nexport default function ListingCard({ listing, viewMode, index }: ListingCardProps) {\n  const navigate = useNavigate();\n\n  const formatDate = (date: string) => {\n    const now = new Date();\n    const itemDate = new Date(date);\n    const diffMs = now.getTime() - itemDate.getTime();\n    const diffMins = Math.floor(diffMs / 60000);\n    const diffHours = Math.floor(diffMs / 3600000);\n    const diffDays = Math.floor(diffMs / 86400000);\n\n    if (diffMins < 60) return `${diffMins} dakika √∂nce`;\n    if (diffHours < 24) return `${diffHours} saat √∂nce`;\n    if (diffDays < 7) return `${diffDays} g√ºn √∂nce`;\n    return itemDate.toLocaleDateString('tr-TR');\n  };\n\n  const handleClick = () => {\n    navigate(`/listing/${listing.id}`);\n  };\n\n  if (viewMode === 'list') {\n    return (\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: index * 0.05 }}\n        onClick={handleClick}\n        className=\"bg-white rounded-2xl shadow-md hover:shadow-xl transition-all overflow-hidden cursor-pointer group\"\n      >\n        <div className=\"flex\">\n          <div className=\"relative w-64 h-48 flex-shrink-0\">\n            <img\n              src={listing.image}\n              alt={listing.title}\n              className=\"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500\"\n            />\n            {listing.isPremium && (\n              <div className=\"absolute top-3 left-3 px-3 py-1 bg-gradient-to-r from-amber-400 to-orange-500 text-white text-xs font-bold rounded-full flex items-center space-x-1\">\n                <i className=\"ri-vip-crown-fill\" />\n                <span>Premium</span>\n              </div>\n            )}\n          </div>\n\n          <div className=\"flex-1 p-6 flex flex-col justify-between\">\n            <div>\n              <div className=\"flex items-start justify-between mb-3\">\n                <div>\n                  <h3 className=\"text-xl font-bold text-gray-900 mb-2 group-hover:text-primary-600 transition-colors\">\n                    {listing.title}\n                  </h3>\n                  <p className=\"text-sm text-gray-600 line-clamp-2\">{listing.description}</p>\n                </div>\n                <div className=\"text-right\">\n                  <div className=\"text-2xl font-bold bg-gradient-primary bg-clip-text text-transparent\">\n                    {listing.price.toLocaleString('tr-TR')} ‚Ç∫\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"flex flex-wrap gap-2 mb-4\">\n                <span className=\"px-3 py-1 bg-gray-100 text-gray-700 text-xs font-medium rounded-full\">\n                  {listing.category}\n                </span>\n                <span className=\"px-3 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full\">\n                  {listing.condition}\n                </span>\n              </div>\n            </div>\n\n            <div className=\"flex items-center justify-between text-sm text-gray-500\">\n              <div className=\"flex items-center space-x-4\">\n                <div className=\"flex items-center space-x-1\">\n                  <i className=\"ri-map-pin-line\" />\n                  <span>{listing.location}</span>\n                </div>\n                <div className=\"flex items-center space-x-1\">\n                  <i className=\"ri-eye-line\" />\n                  <span>{listing.views}</span>\n                </div>\n              </div>\n              <div className=\"flex items-center space-x-1\">\n                <i className=\"ri-time-line\" />\n                <span>{formatDate(listing.createdAt)}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </motion.div>\n    );\n  }\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ delay: index * 0.05 }}\n      onClick={handleClick}\n      className=\"bg-white rounded-2xl shadow-md hover:shadow-xl transition-all overflow-hidden cursor-pointer group\"\n      data-product-shop\n    >\n      <div className=\"relative h-56 overflow-hidden\">\n        <img\n          src={listing.image}\n          alt={listing.title}\n          className=\"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500\"\n        />\n        {listing.isPremium && (\n          <div className=\"absolute top-3 right-3 px-3 py-1 bg-gradient-to-r from-amber-400 to-orange-500 text-white text-xs font-bold rounded-full flex items-center space-x-1\">\n            <i className=\"ri-vip-crown-fill\" />\n            <span>Premium</span>\n          </div>\n        )}\n        <div className=\"absolute bottom-3 left-3 px-3 py-1 bg-white/90 backdrop-blur-sm rounded-full text-xs font-medium text-gray-700\">\n          {listing.category}\n        </div>\n      </div>\n\n      <div className=\"p-5\">\n        <h3 className=\"text-lg font-bold text-gray-900 mb-2 line-clamp-2 group-hover:text-primary-600 transition-colors\">\n          {listing.title}\n        </h3>\n        \n        <p className=\"text-sm text-gray-600 mb-4 line-clamp-2\">{listing.description}</p>\n\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"text-2xl font-bold bg-gradient-primary bg-clip-text text-transparent\">\n            {listing.price.toLocaleString('tr-TR')} ‚Ç∫\n          </div>\n          <span className=\"px-3 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full\">\n            {listing.condition}\n          </span>\n        </div>\n\n        <div className=\"flex items-center justify-between text-sm text-gray-500 pt-4 border-t border-gray-100\">\n          <div className=\"flex items-center space-x-1\">\n            <i className=\"ri-map-pin-line\" />\n            <span>{listing.location}</span>\n          </div>\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"flex items-center space-x-1\">\n              <i className=\"ri-eye-line\" />\n              <span>{listing.views}</span>\n            </div>\n            <span>{formatDate(listing.createdAt)}</span>\n          </div>\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n","import { supabase } from '../lib/supabase';\r\nimport type { FilterState } from '../types/listing';\r\n\r\n// Database listing type (from Supabase)\r\nexport interface DBListing {\r\n  id: string;\r\n  title: string;\r\n  description: string | null;\r\n  price: number;\r\n  category: string;\r\n  location: string | null;\r\n  condition: string;\r\n  image_url: string | null;\r\n  images: string[];\r\n  is_premium: boolean;\r\n  views: number;\r\n  created_at: string;\r\n  status: string;\r\n  user_id: string;\r\n}\r\n\r\n// Environment config\r\nconst SUPABASE_URL = import.meta.env.VITE_SUPABASE_URL || '';\r\nconst USE_EDGE_FUNCTIONS = import.meta.env.VITE_USE_EDGE_FUNCTIONS !== 'false'; // default true\r\n\r\n/**\r\n * Fetch listings via Edge Function (with fallback to direct client)\r\n */\r\nasync function fetchViaEdge(filters: FilterState): Promise<DBListing[]> {\r\n  const response = await fetch(`${SUPABASE_URL}/functions/v1/get-listings`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${import.meta.env.VITE_SUPABASE_ANON_KEY || ''}`,\r\n    },\r\n    body: JSON.stringify(filters),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    throw new Error(`Edge function error: ${response.status}`);\r\n  }\r\n\r\n  const result = await response.json();\r\n  return result.listings || [];\r\n}\r\n\r\n/**\r\n * Fetch listings directly from Supabase (fallback)\r\n */\r\nasync function fetchDirect(filters: FilterState): Promise<DBListing[]> {\r\n  try {\r\n    let query = supabase\r\n      .from('listings')\r\n      .select('*')\r\n      .eq('status', 'active'); // Only active listings\r\n\r\n    // Category filter\r\n    if (filters.categories && filters.categories.length > 0) {\r\n      query = query.in('category', filters.categories);\r\n    }\r\n\r\n    // Price range filter\r\n    if (filters.priceRange && filters.priceRange.length === 2) {\r\n      query = query\r\n        .gte('price', filters.priceRange[0])\r\n        .lte('price', filters.priceRange[1]);\r\n    }\r\n\r\n    // Location filter\r\n    if (filters.location) {\r\n      query = query.ilike('location', `%${filters.location}%`);\r\n    }\r\n\r\n    // Condition filter\r\n    if (filters.condition && filters.condition.length > 0) {\r\n      query = query.in('condition', filters.condition);\r\n    }\r\n\r\n    // Premium filter\r\n    if (filters.isPremium) {\r\n      query = query.eq('is_premium', true);\r\n    }\r\n\r\n    // Date range filter\r\n    if (filters.dateRange && filters.dateRange !== 'all') {\r\n      const now = new Date();\r\n      let dateThreshold: Date;\r\n\r\n      switch (filters.dateRange) {\r\n        case 'today':\r\n          dateThreshold = new Date(now.setHours(0, 0, 0, 0));\r\n          break;\r\n        case 'week':\r\n          dateThreshold = new Date(now.setDate(now.getDate() - 7));\r\n          break;\r\n        case 'month':\r\n          dateThreshold = new Date(now.setMonth(now.getMonth() - 1));\r\n          break;\r\n        default:\r\n          dateThreshold = new Date(0); // All time\r\n      }\r\n\r\n      query = query.gte('created_at', dateThreshold.toISOString());\r\n    }\r\n\r\n    // Sort by newest first\r\n    query = query.order('created_at', { ascending: false });\r\n\r\n    const { data, error } = await query;\r\n\r\n    if (error) {\r\n      console.error('Supabase query error:', error);\r\n      throw error;\r\n    }\r\n\r\n    return data || [];\r\n  } catch (error) {\r\n    console.error('Error fetching listings (direct):', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n/**\r\n * Fetch listings from Supabase with filters (Edge-first with fallback)\r\n */\r\nexport async function fetchListingsWithFilters(filters: FilterState): Promise<DBListing[]> {\r\n  try {\r\n    if (USE_EDGE_FUNCTIONS) {\r\n      try {\r\n        console.log('üöÄ Fetching via Edge function...');\r\n        return await fetchViaEdge(filters);\r\n      } catch (edgeError) {\r\n        console.warn('‚ö†Ô∏è Edge function failed, falling back to direct:', edgeError);\r\n        return await fetchDirect(filters);\r\n      }\r\n    } else {\r\n      console.log('üì° Fetching directly (Edge functions disabled)');\r\n      return await fetchDirect(filters);\r\n    }\r\n  } catch (error) {\r\n    console.error('Error fetching listings:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n/**\r\n * Fetch single listing by ID\r\n */\r\nexport async function fetchListingById(id: string): Promise<DBListing | null> {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from('listings')\r\n      .select('*')\r\n      .eq('id', id)\r\n      .eq('status', 'active')\r\n      .single();\r\n\r\n    if (error) {\r\n      console.error('Supabase query error:', error);\r\n      throw error;\r\n    }\r\n\r\n    return data;\r\n  } catch (error) {\r\n    console.error('Error fetching listing:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Fetch all active listings (no filters)\r\n */\r\nexport async function fetchListings(): Promise<DBListing[]> {\r\n  // Use fetchListingsWithFilters with empty filters for consistency\r\n  return fetchListingsWithFilters({\r\n    categories: [],\r\n    priceRange: [0, 1000000],\r\n    location: '',\r\n    condition: [],\r\n    isPremium: false,\r\n    dateRange: 'all',\r\n  });\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport FilterSidebar from './components/FilterSidebar';\r\nimport ListingCard from './components/ListingCard';\r\nimport ChatBox from '../../components/feature/ChatBox';\r\nimport TopNavigation from '../../components/feature/TopNavigation';\r\nimport Footer from '../home/components/Footer';\r\nimport { fetchListingsWithFilters, type DBListing } from '../../services/supabase';\r\nimport { supabase } from '../../lib/supabase';\r\nimport type { Listing, FilterState } from '../../types/listing';\r\n\r\n// Resolve a Supabase storage path or direct URL to a public URL\r\nconst resolveImageUrl = (path?: string | null) => {\r\n  if (!path) return null;\r\n  if (path.startsWith('http')) return path;\r\n\r\n  const { data } = supabase.storage.from('product-images').getPublicUrl(path);\r\n  return data.publicUrl || null;\r\n};\r\n\r\nexport default function ListingsPage() {\r\n  const [isScrolled, setIsScrolled] = useState(false);\r\n  const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid');\r\n  const [sortBy, setSortBy] = useState('newest');\r\n  const [showFilters, setShowFilters] = useState(false);\r\n\r\n  // Only use real data from Supabase\r\n  const [filteredListings, setFilteredListings] = useState<Listing[]>([]);\r\n  const [isLoadingFromSupabase, setIsLoadingFromSupabase] = useState(false);\r\n\r\n  const [filters, setFilters] = useState<FilterState>({\r\n    categories: [],\r\n    priceRange: [0, 1000000],\r\n    location: '',\r\n    condition: [],\r\n    isPremium: false,\r\n    dateRange: 'all',\r\n  });\r\n\r\n  useEffect(() => {\r\n    const handleScroll = () => {\r\n      setIsScrolled(window.scrollY > 50);\r\n    };\r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => window.removeEventListener('scroll', handleScroll);\r\n  }, []);\r\n\r\n  // Fetch from Supabase when filters change\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      setIsLoadingFromSupabase(true);\r\n      try {\r\n        const data = await fetchListingsWithFilters(filters);\r\n\r\n        // Convert Supabase data to frontend Listing type\r\n        const convertedListings: Listing[] = data.map((item: DBListing) => ({\r\n          id: item.id,\r\n          title: item.title,\r\n          description: item.description,\r\n          price: item.price,\r\n          category: item.category,\r\n          location: item.location,\r\n          condition: item.condition,\r\n          image:\r\n            resolveImageUrl(item.images?.[0]) ||\r\n            resolveImageUrl(item.image_url) ||\r\n            'https://via.placeholder.com/400x300',\r\n          images: item.images\r\n            ?.map(img => resolveImageUrl(img))\r\n            .filter((url): url is string => Boolean(url)),\r\n          isPremium: item.is_premium || false,\r\n          views: item.views,\r\n          createdAt: item.created_at,\r\n          seller: {\r\n            name: 'Kullanƒ±cƒ±',\r\n            rating: 4.5,\r\n            verified: false,\r\n          },\r\n        }));\r\n\r\n        // Sort the listings\r\n        let sortedListings = [...convertedListings];\r\n        switch (sortBy) {\r\n          case 'newest':\r\n            sortedListings.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\r\n            break;\r\n          case 'oldest':\r\n            sortedListings.sort((a, b) => new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime());\r\n            break;\r\n          case 'price-low':\r\n            sortedListings.sort((a, b) => a.price - b.price);\r\n            break;\r\n          case 'price-high':\r\n            sortedListings.sort((a, b) => b.price - a.price);\r\n            break;\r\n          case 'popular':\r\n            sortedListings.sort((a, b) => b.views - a.views);\r\n            break;\r\n        }\r\n\r\n        setFilteredListings(sortedListings);\r\n      } catch (error) {\r\n        console.error('Failed to fetch from Supabase:', error);\r\n        setFilteredListings([]);\r\n      } finally {\r\n        setIsLoadingFromSupabase(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [filters, sortBy]);\r\n\r\n  const handleFilterChange = (newFilters: Partial<FilterState>) => {\r\n    setFilters(prev => ({ ...prev, ...newFilters }));\r\n  };\r\n\r\n  const clearFilters = () => {\r\n    setFilters({\r\n      categories: [],\r\n      priceRange: [0, 1000000],\r\n      location: '',\r\n      condition: [],\r\n      isPremium: false,\r\n      dateRange: 'all',\r\n    });\r\n  };\r\n\r\n  const handleNavigation = (path: string) => {\r\n    if (window.REACT_APP_NAVIGATE) {\r\n      window.REACT_APP_NAVIGATE(path);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-cyan-50\">\r\n      <TopNavigation isScrolled={isScrolled} />\r\n\r\n      <div className=\"pt-24 pb-16\">\r\n        <div className=\"max-w-7xl mx-auto px-6\">\r\n          {/* Header */}\r\n          <div className=\"mb-8\">\r\n            <h1 className=\"text-4xl lg:text-5xl font-display font-bold mb-4\">\r\n              <span className=\"bg-gradient-primary bg-clip-text text-transparent\">\r\n                T√ºm ƒ∞lanlar\r\n              </span>\r\n            </h1>\r\n            <p className=\"text-lg text-gray-600\">\r\n              {filteredListings.length} ilan bulundu\r\n            </p>\r\n          </div>\r\n\r\n          {/* Controls */}\r\n          <div className=\"flex flex-wrap items-center justify-between gap-4 mb-8\">\r\n            <div className=\"flex items-center space-x-4\">\r\n              <button\r\n                onClick={() => setShowFilters(!showFilters)}\r\n                className=\"flex items-center space-x-2 px-5 py-2.5 bg-white rounded-full shadow-md hover:shadow-lg transition-all whitespace-nowrap cursor-pointer\"\r\n              >\r\n                <i className=\"ri-filter-3-line text-lg\" />\r\n                <span className=\"text-sm font-medium\">Filtreler</span>\r\n                {(filters.categories.length > 0 || filters.condition.length > 0 || filters.isPremium) && (\r\n                  <span className=\"w-5 h-5 bg-gradient-primary text-white text-xs rounded-full flex items-center justify-center\">\r\n                    {filters.categories.length + filters.condition.length + (filters.isPremium ? 1 : 0)}\r\n                  </span>\r\n                )}\r\n              </button>\r\n\r\n              {(filters.categories.length > 0 || filters.condition.length > 0 || filters.isPremium || filters.location) && (\r\n                <button\r\n                  onClick={clearFilters}\r\n                  className=\"text-sm text-gray-600 hover:text-red-600 transition-colors whitespace-nowrap cursor-pointer\"\r\n                >\r\n                  Filtreleri Temizle\r\n                </button>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"flex items-center space-x-4\">\r\n              {/* Sort */}\r\n              <select\r\n                value={sortBy}\r\n                onChange={(e) => setSortBy(e.target.value)}\r\n                className=\"px-4 py-2.5 bg-white rounded-full shadow-md text-sm font-medium cursor-pointer focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n                aria-label=\"ƒ∞lanlarƒ± sƒ±rala\"\r\n              >\r\n                <option value=\"newest\">En Yeni</option>\r\n                <option value=\"oldest\">En Eski</option>\r\n                <option value=\"price-low\">Fiyat: D√º≈ü√ºkten Y√ºkseƒüe</option>\r\n                <option value=\"price-high\">Fiyat: Y√ºksekten D√º≈ü√ºƒüe</option>\r\n                <option value=\"popular\">En Pop√ºler</option>\r\n              </select>\r\n\r\n              {/* View Mode */}\r\n              <div className=\"flex items-center bg-white rounded-full shadow-md p-1\">\r\n                <button\r\n                  onClick={() => setViewMode('grid')}\r\n                  className={`w-10 h-10 rounded-full flex items-center justify-center transition-all cursor-pointer ${viewMode === 'grid' ? 'bg-gradient-primary text-white' : 'text-gray-600 hover:text-gray-900'\r\n                    }`}\r\n                  aria-label=\"Izgara g√∂r√ºn√ºm√º\"\r\n                >\r\n                  <i className=\"ri-grid-line text-lg\" />\r\n                </button>\r\n                <button\r\n                  onClick={() => setViewMode('list')}\r\n                  className={`w-10 h-10 rounded-full flex items-center justify-center transition-all cursor-pointer ${viewMode === 'list' ? 'bg-gradient-primary text-white' : 'text-gray-600 hover:text-gray-900'\r\n                    }`}\r\n                  aria-label=\"Liste g√∂r√ºn√ºm√º\"\r\n                >\r\n                  <i className=\"ri-list-check text-lg\" />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex gap-8\">\r\n            {/* Filter Sidebar */}\r\n            <AnimatePresence>\r\n              {showFilters && (\r\n                <motion.div\r\n                  initial={{ opacity: 0, x: -20 }}\r\n                  animate={{ opacity: 1, x: 0 }}\r\n                  exit={{ opacity: 0, x: -20 }}\r\n                  className=\"w-80 flex-shrink-0\"\r\n                >\r\n                  <FilterSidebar filters={filters} onFilterChange={handleFilterChange} />\r\n                </motion.div>\r\n              )}\r\n            </AnimatePresence>\r\n\r\n            {/* Listings Grid/List */}\r\n            <div className=\"flex-1\">\r\n              {filteredListings.length === 0 ? (\r\n                <div className=\"text-center py-20\">\r\n                  <i className=\"ri-inbox-line text-6xl text-gray-300 mb-4\" />\r\n                  <h3 className=\"text-xl font-semibold text-gray-600 mb-2\">ƒ∞lan Bulunamadƒ±</h3>\r\n                  <p className=\"text-gray-500\">Filtrelerinizi deƒüi≈ütirmeyi deneyin</p>\r\n                </div>\r\n              ) : (\r\n                <div\r\n                  className={\r\n                    viewMode === 'grid'\r\n                      ? 'grid md:grid-cols-2 lg:grid-cols-3 gap-6'\r\n                      : 'space-y-4'\r\n                  }\r\n                >\r\n                  {filteredListings.map((listing, index) => (\r\n                    <ListingCard\r\n                      key={listing.id}\r\n                      listing={listing}\r\n                      viewMode={viewMode}\r\n                      index={index}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <Footer />\r\n      {/* AI Chat Panel */}\r\n      <ChatBox />\r\n    </div>\r\n  );\r\n}\r\n"],"names":["categories","conditions","dateRanges","FilterSidebar","filters","onFilterChange","toggleCategory","categoryId","newCategories","c","toggleCondition","conditionId","newConditions","jsxs","jsx","category","motion","e","condition","range","ListingCard","listing","viewMode","index","navigate","useNavigate","formatDate","date","now","itemDate","diffMs","diffMins","diffHours","diffDays","handleClick","USE_EDGE_FUNCTIONS","fetchDirect","query","supabase","dateThreshold","data","error","fetchListingsWithFilters","resolveImageUrl","path","ListingsPage","isScrolled","setIsScrolled","useState","setViewMode","sortBy","setSortBy","showFilters","setShowFilters","filteredListings","setFilteredListings","isLoadingFromSupabase","setIsLoadingFromSupabase","setFilters","useEffect","handleScroll","sortedListings","item","img","url","a","b","handleFilterChange","newFilters","prev","clearFilters","TopNavigation","AnimatePresence","Footer","ChatBox"],"mappings":"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"}